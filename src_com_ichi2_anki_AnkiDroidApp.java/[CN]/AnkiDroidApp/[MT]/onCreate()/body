{
  super.onCreate();
  if (android.os.Build.MODEL.toLowerCase().equals("nook") || android.os.Build.DEVICE.toLowerCase().equals("nook")) {
    mCompat=new CompatV4();
  }
 else   if (AnkiDroidApp.SDK_VERSION >= 15) {
    mCompat=new CompatV15();
  }
 else   if (AnkiDroidApp.SDK_VERSION >= 11) {
    mCompat=new CompatV11();
  }
 else   if (AnkiDroidApp.SDK_VERSION >= 9) {
    mCompat=new CompatV9();
  }
 else   if (AnkiDroidApp.SDK_VERSION >= 5) {
    mCompat=new CompatV5();
  }
 else {
    mCompat=new CompatV4();
  }
  sInstance=this;
  Connection.setContext(getApplicationContext());
  CustomExceptionHandler customExceptionHandler=CustomExceptionHandler.getInstance();
  customExceptionHandler.init(sInstance.getApplicationContext());
  Thread.setDefaultUncaughtExceptionHandler(customExceptionHandler);
  SharedPreferences preferences=getSharedPrefs(this);
  sInstance.mHooks=new Hooks(preferences);
  sInstance.mLanguage=mLanguage=preferences.getString("language","");
  if (!preferences.contains("deckPath")) {
    Editor editor=preferences.edit();
    String deckPath=getDefaultAnkiDroidDirectory();
    createDirectoryIfMissing(new File(deckPath));
    editor.putString("deckPath",deckPath);
    editor.commit();
  }
}
