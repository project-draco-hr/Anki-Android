{
  super.onCreate();
  if (UIUtils.getApiLevel() >= 11) {
    mCompat=new CompatV11();
  }
 else {
    mCompat=new CompatV4();
  }
  sInstance=this;
  sInstance.mHooks=new Hooks();
  Connection.setContext(getApplicationContext());
  CustomExceptionHandler customExceptionHandler=CustomExceptionHandler.getInstance();
  customExceptionHandler.init(sInstance.getApplicationContext());
  Thread.setDefaultUncaughtExceptionHandler(customExceptionHandler);
  SharedPreferences preferences=getSharedPrefs(this);
  sInstance.mLanguage=mLanguage=preferences.getString("language","");
  if (!preferences.contains("deckPath")) {
    Editor editor=preferences.edit();
    String deckPath=getDefaultAnkiDroidDirectory();
    createDirectoryIfMissing(new File(deckPath));
    editor.putString("deckPath",deckPath);
    editor.commit();
  }
}
