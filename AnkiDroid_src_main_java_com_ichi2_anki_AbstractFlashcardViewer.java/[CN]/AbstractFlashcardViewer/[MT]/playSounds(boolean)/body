{
  boolean replayQuestion=getConfigForCurrentCard().optBoolean("replayq",true);
  boolean autoPlayEnabled;
  try {
    autoPlayEnabled=getConfigForCurrentCard().getBoolean("autoplay");
  }
 catch (  JSONException e) {
    throw new RuntimeException(e);
  }
  if (autoPlayEnabled || doAudioReplay) {
    boolean useTTS=mSpeakText && !(sDisplayAnswer && Sound.hasAnswer()) && !(!sDisplayAnswer && Sound.hasQuestion());
    if (!useTTS) {
      WeakReference<Activity> contextRef=new WeakReference<Activity>(this);
      if (doAudioReplay && replayQuestion && sDisplayAnswer) {
        Sound.playSounds(Sound.SOUNDS_QUESTION_AND_ANSWER,contextRef);
      }
 else       if (sDisplayAnswer) {
        Sound.playSounds(Sound.SOUNDS_ANSWER,contextRef);
      }
 else {
        Sound.playSounds(Sound.SOUNDS_QUESTION,contextRef);
      }
    }
 else {
      if (mTtsInitialized) {
        if (!sDisplayAnswer || doAudioReplay && replayQuestion) {
          readCardText(mCurrentCard,Sound.SOUNDS_QUESTION);
        }
        if (sDisplayAnswer) {
          readCardText(mCurrentCard,Sound.SOUNDS_ANSWER);
        }
      }
 else {
        mReplayOnTtsInit=true;
      }
    }
  }
}
