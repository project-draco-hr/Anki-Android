{
  super.onActivityResult(requestCode,resultCode,intent);
  if (requestCode == PICK_DECK_REQUEST) {
    if (resultCode != RESULT_OK) {
      Log.e("ankidroid","Deck browser returned with error");
      return;
    }
    if (intent == null) {
      Log.e("ankidroid","Deck browser returned null intent");
      return;
    }
    deckFilename=intent.getExtras().getString(OPT_DB);
    SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    Editor editor=preferences.edit();
    editor.putString("deckFilename",deckFilename);
    editor.commit();
    displayProgressDialogAndLoadDeck();
  }
 else   if (requestCode == PREFERENCES_UPDATE) {
    SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    corporalPunishments=preferences.getBoolean("corporalPunishments",false);
    timerAndWhiteboard=preferences.getBoolean("timerAndWhiteboard",true);
    spacedRepetition=preferences.getBoolean("spacedRepetition",true);
    deckPath=preferences.getString("deckPath","/sdcard");
    showOrHideControls();
  }
}
