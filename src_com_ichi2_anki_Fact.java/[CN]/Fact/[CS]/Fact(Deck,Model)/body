{
  Long mModelId;
  mDeck=deck;
  mModel=model;
  mId=Utils.genID();
  if (model == null) {
    mModelId=deck.getCurrentModelId();
  }
 else {
    mModelId=model.getId();
  }
  TreeMap<Long,FieldModel> mFieldModels=new TreeMap<Long,FieldModel>();
  FieldModel.fromDb(deck,mModelId,mFieldModels);
  mFields=new TreeSet<Field>(new FieldOrdinalComparator());
  for (  Long i : mFieldModels.keySet()) {
    mFields.add(new Field(mFieldModels.get(i)));
  }
}
