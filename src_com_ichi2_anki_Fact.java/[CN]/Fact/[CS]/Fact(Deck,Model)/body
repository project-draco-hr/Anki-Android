{
  Long mModelId;
  this.deck=deck;
  this.model=model;
  this.id=Utils.genID();
  if (model == null) {
    mModelId=deck.currentModelId;
  }
 else {
    mModelId=model.id;
  }
  TreeMap<Long,FieldModel> mFieldModels=new TreeMap<Long,FieldModel>();
  FieldModel.fromDb(deck,mModelId,mFieldModels);
  fields=new TreeSet<Field>(new FieldOrdinalComparator());
  for (  Long i : mFieldModels.keySet()) {
    this.fields.add(new Field(mFieldModels.get(i)));
  }
}
