{
  mDeck=deck;
  mModel=model;
  mId=Utils.genID();
  if (model == null) {
    mModelId=deck.getCurrentModelId();
  }
 else {
    mModelId=model.getId();
  }
  TreeMap<Long,FieldModel> mFieldModels=new TreeMap<Long,FieldModel>();
  FieldModel.fromDb(deck,mModelId,mFieldModels);
  mFields=new TreeSet<Field>(new FieldOrdinalComparator());
  for (  Entry<Long,FieldModel> entry : mFieldModels.entrySet()) {
    mFields.add(new Field(mId,entry.getValue()));
  }
}
