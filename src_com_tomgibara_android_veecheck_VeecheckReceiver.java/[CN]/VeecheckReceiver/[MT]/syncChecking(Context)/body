{
  VeecheckSettings settings=createSettings(context);
  AlarmManager manager=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
  PendingIntent pending=createCheckingIntent(context);
  if (settings.isEnabled()) {
    Log.d(LOG_TAG,"Registering checks with alarm service");
    long now=System.currentTimeMillis();
    long period=settings.getPeriod();
    long offset=(long)(Math.random() * period);
    Log.v(LOG_TAG,"Check period is " + period + "ms starting from "+ new Date(now + offset));
    manager.setRepeating(AlarmManager.RTC,now + offset,period,pending);
  }
 else {
    Log.d(LOG_TAG,"de-registering checks with alarm service");
    manager.cancel(pending);
  }
}
