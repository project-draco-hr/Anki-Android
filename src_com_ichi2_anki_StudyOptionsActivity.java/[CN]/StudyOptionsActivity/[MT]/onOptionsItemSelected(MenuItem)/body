{
switch (item.getItemId()) {
case android.R.id.home:
    closeStudyOptions();
  return true;
case MENU_PREFERENCES:
startActivityForResult(new Intent(this,Preferences.class),StudyOptionsFragment.PREFERENCES_UPDATE);
if (AnkiDroidApp.SDK_VERSION > 4) {
ActivityTransitionAnimation.slide(this,ActivityTransitionAnimation.FADE);
}
return true;
case MENU_ROTATE:
if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {
this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
}
 else {
this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
}
return true;
case MENU_NIGHT:
SharedPreferences preferences=AnkiDroidApp.getSharedPrefs(this);
if (preferences.getBoolean("invertedColors",false)) {
preferences.edit().putBoolean("invertedColors",false).commit();
item.setIcon(R.drawable.ic_menu_night);
}
 else {
preferences.edit().putBoolean("invertedColors",true).commit();
item.setIcon(R.drawable.ic_menu_night_checked);
}
return true;
default :
return super.onOptionsItemSelected(item);
}
}
