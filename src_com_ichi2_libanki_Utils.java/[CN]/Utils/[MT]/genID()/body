{
  long time=System.currentTimeMillis();
  long id;
  long rand;
  if (sIdTree == null) {
    sIdTree=new TreeSet<Long>();
    sIdTime=time;
  }
 else   if (sIdTime != time) {
    sIdTime=time;
    sIdTree.clear();
  }
  while (true) {
    rand=UUID.randomUUID().getMostSignificantBits();
    if (!sIdTree.contains(new Long(rand))) {
      sIdTree.add(new Long(rand));
      break;
    }
  }
  id=rand << 41 | time;
  return id;
}
