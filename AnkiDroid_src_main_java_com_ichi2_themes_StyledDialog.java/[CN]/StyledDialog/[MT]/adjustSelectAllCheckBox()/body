{
  boolean check=true;
  for (int i=0; i < mListView.getCount(); i++) {
    if (!mListView.isItemChecked(i)) {
      check=false;
      break;
    }
  }
  CheckBox selectAll=(CheckBox)findViewById(R.id.SelectAllCheckbox);
  selectAll.setOnCheckedChangeListener(null);
  selectAll.setChecked(check);
  selectAll.setOnCheckedChangeListener((CompoundButton.OnCheckedChangeListener)selectAll.getTag());
}
