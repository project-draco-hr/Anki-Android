{
  Log.e(AnkiDroidApp.TAG,"The database has been corrupted... attempting to repair");
  if (!sRepaired) {
    sRepaired=true;
    Log.i(AnkiDroidApp.TAG,"Attempting to repair the database...");
    BackupManager.repairDeck(AnkiDroidApp.COLLECTION_PATH);
    Log.i(AnkiDroidApp.TAG,"The database seems to have been successfully repaired");
    AnkiDroidApp.saveExceptionReportFile("AnkiDb.MyDbErrorHandler.onCorruption","Db successfully repaired");
  }
 else {
    Log.i(AnkiDroidApp.TAG,"The database could not be automatically repaired....");
    AnkiDroidApp.closeCollection(false);
  }
}
