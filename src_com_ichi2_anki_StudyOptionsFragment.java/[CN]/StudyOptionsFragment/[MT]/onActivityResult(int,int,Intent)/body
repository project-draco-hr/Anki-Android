{
  super.onActivityResult(requestCode,resultCode,intent);
  Log.i(AnkiDroidApp.TAG,"StudyOptions: onActivityResult");
  if (resultCode == DeckPicker.RESULT_DB_ERROR) {
    closeStudyOptions(DeckPicker.RESULT_DB_ERROR);
  }
  if (resultCode == AnkiDroidApp.RESULT_TO_HOME) {
    closeStudyOptions();
    return;
  }
  if (resultCode == DeckPicker.RESULT_MEDIA_EJECTED) {
    closeStudyOptions(DeckPicker.RESULT_MEDIA_EJECTED);
  }
 else   if (requestCode == DECK_OPTIONS) {
    JSONObject deck=mCol.getDecks().current();
    try {
      if (deck.has("empty") && deck.getBoolean("empty")) {
        rebuildCramDeck();
        deck.remove("empty");
      }
    }
 catch (    JSONException e) {
      throw new RuntimeException(e);
    }
    resetAndUpdateValuesFromDeck();
  }
 else   if (requestCode == ADD_NOTE && resultCode != getActivity().RESULT_CANCELED) {
    resetAndUpdateValuesFromDeck();
  }
 else   if (requestCode == PREFERENCES_UPDATE) {
    restorePreferences();
  }
 else   if (requestCode == REQUEST_REVIEW) {
    Log.i(AnkiDroidApp.TAG,"Result code = " + resultCode);
switch (resultCode) {
case Reviewer.RESULT_SESSION_COMPLETED:
default :
      showContentView(CONTENT_STUDY_OPTIONS,mDontSaveOnStop);
    break;
case Reviewer.RESULT_NO_MORE_CARDS:
  showContentView(CONTENT_CONGRATS,mDontSaveOnStop);
break;
}
mDontSaveOnStop=false;
}
 else if (requestCode == BROWSE_CARDS && resultCode == getActivity().RESULT_OK) {
mDontSaveOnStop=false;
resetAndUpdateValuesFromDeck();
}
 else if (requestCode == STATISTICS && mCurrentContentView == CONTENT_CONGRATS) {
showContentView(CONTENT_STUDY_OPTIONS);
}
}
