{
  String fullName;
  JSONObject deck=mCol.getDecks().current();
  try {
    fullName=deck.getString("name");
    if (deck.has("empty") && deck.getBoolean("empty")) {
      openCramDeckOptions();
      return;
    }
  }
 catch (  JSONException e) {
    throw new RuntimeException(e);
  }
  String[] name=fullName.split("::");
  StringBuilder nameBuilder=new StringBuilder();
  if (name.length > 0) {
    nameBuilder.append(name[0]);
  }
  if (name.length > 1) {
    nameBuilder.append("\n").append(name[1]);
  }
  if (name.length > 3) {
    nameBuilder.append("...");
  }
  if (name.length > 2) {
    nameBuilder.append("\n").append(name[name.length - 1]);
  }
  mTextDeckName.setText(nameBuilder.toString());
  if (!mFragmented) {
    getActivity().setTitle(fullName);
  }
  String desc=mCol.getDecks().getActualDescription();
  if (desc.length() > 0) {
    mTextDeckDescription.setText(desc);
    mTextDeckDescription.setVisibility(View.VISIBLE);
  }
 else {
    mTextDeckDescription.setVisibility(View.GONE);
  }
  DeckTask.launchDeckTask(DeckTask.TASK_TYPE_UPDATE_VALUES_FROM_DECK,mUpdateValuesFromDeckListener,new DeckTask.TaskData(mCol.getSched(),reset));
}
