{
  ArrayAdapter<FileEntry> fa=mFileListAdapter;
  fa.clear();
  try {
    if (mBrowser == null) {
      mBrowser=new FileBrowser(null);
    }
  }
 catch (  NotDirException e) {
    FileEntry bad_ent=new FileEntry(false,false,"Error listing files");
    bad_ent.mIsInfo=true;
    fa.add(bad_ent);
  }
  FileEntry current;
  try {
    current=new FileEntry(false,false,"Current: " + mBrowser.mCurrent.getCanonicalPath());
  }
 catch (  IOException e) {
    current=new FileEntry(false,false,"Current: Unknown?!");
  }
  fa.add(current);
  FileEntry[] list=mBrowser.mDirectories;
  for (int i=0; i < list.length; i++) {
    fa.add(list[i]);
  }
  list=mBrowser.mFiles;
  for (int i=0; i < list.length; i++) {
    fa.add(list[i]);
  }
  mFileList.clearChoices();
}
