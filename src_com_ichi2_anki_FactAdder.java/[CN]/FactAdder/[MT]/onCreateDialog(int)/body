{
  Dialog dialog;
  AlertDialog.Builder builder;
switch (id) {
case DIALOG_MODEL_SELECT:
    ArrayList<CharSequence> dialogItems=new ArrayList<CharSequence>();
  final ArrayList<Long> dialogIds=new ArrayList<Long>();
Model mModel;
builder=new AlertDialog.Builder(this);
builder.setTitle(R.string.select_model);
for (Long i : mModels.keySet()) {
mModel=mModels.get(i);
dialogItems.add(mModel.getName());
dialogIds.add(i);
}
CharSequence[] items=new CharSequence[dialogItems.size()];
dialogItems.toArray(items);
builder.setItems(items,new DialogInterface.OnClickListener(){
public void onClick(DialogInterface dialog,int item){
long oldModelId=mCurrentSelectedModelId;
mCurrentSelectedModelId=dialogIds.get(item);
if (oldModelId != mCurrentSelectedModelId) {
int size=mEditFields.size();
String[] oldValues=new String[size];
for (int i=0; i < size; i++) {
oldValues[i]=mEditFields.get(i).getText().toString();
}
modelChanged();
if ((mSourceText == null || mSourceText.isEmpty()) && (mTargetText == null || mTargetText.isEmpty())) {
for (int i=0; i < Math.min(size,mEditFields.size()); i++) {
mEditFields.get(i).setText(oldValues[i]);
}
}
}
}
}
);
return builder.create();
default :
dialog=null;
}
return dialog;
}
