{
  Dialog dialog;
switch (id) {
case DIALOG_MODEL_SELECT:
    ArrayList<CharSequence> dialogItems=new ArrayList<CharSequence>();
  final ArrayList<Long> dialogIds=new ArrayList<Long>();
Model mModel;
AlertDialog.Builder builder=new AlertDialog.Builder(this);
builder.setTitle("Select Model:");
for (Long i : mModels.keySet()) {
mModel=mModels.get(i);
dialogItems.add(mModel.getName());
dialogIds.add(i);
}
CharSequence[] items=new CharSequence[dialogItems.size()];
dialogItems.toArray(items);
builder.setItems(items,new DialogInterface.OnClickListener(){
public void onClick(DialogInterface dialog,int item){
long oldModelId=mCurrentSelectedModelId;
mCurrentSelectedModelId=dialogIds.get(item);
mModelButton.setText(mModels.get(mCurrentSelectedModelId).getName());
if (oldModelId != mCurrentSelectedModelId) {
populateEditFields();
}
}
}
);
AlertDialog alert=builder.create();
return alert;
default :
dialog=null;
}
return dialog;
}
