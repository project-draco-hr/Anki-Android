{
  super.onCreate(savedInstanceState);
  registerExternalStorageListener();
  setContentView(R.layout.fact_adder);
  mFieldsLayoutContainer=(LinearLayout)findViewById(R.id.FactAdderEditFieldsLayout);
  addButton=(Button)findViewById(R.id.FactAdderAddButton);
  closeButton=(Button)findViewById(R.id.FactAdderCloseButton);
  modelButton=(Button)findViewById(R.id.FactAdderModelButton);
  deck=AnkiDroidApp.deck();
  models=Model.getModels(deck);
  currentSelectedModelId=deck.currentModelId;
  modelButton.setText(models.get(currentSelectedModelId).name);
  populateEditFields();
  addButton.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View v){
      Fact f=deck.newFact();
      Log.i("Debug",Long.toString(f.id));
      setResult(RESULT_OK);
      finish();
    }
  }
);
  modelButton.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View v){
      showDialog(DIALOG_MODEL_SELECT);
    }
  }
);
  closeButton.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View v){
      setResult(RESULT_CANCELED);
      finish();
    }
  }
);
}
