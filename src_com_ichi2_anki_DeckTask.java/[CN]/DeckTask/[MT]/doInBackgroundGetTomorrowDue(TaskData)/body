{
  Log.i(AnkiDroidApp.TAG,"doInBackgroundGetTomorrowDue");
  File dir=new File(params[0].getString());
  File[] fileList=dir.listFiles(new WidgetStatus.AnkiFileFilter());
  int requestingActivity=params[0].getInt();
  int failedCards=0;
  int revCards=0;
  int newCards=0;
  int eta=0;
  if (fileList != null && fileList.length != 0) {
    for (    File file : fileList) {
      String absPath=file.getAbsolutePath();
      try {
        Deck deck=DeckManager.getDeck(absPath,requestingActivity,false);
        if (deck != null) {
          int failed=deck.getFailedDelayedCount();
          int revs=deck.getNextDueCards(1);
          int news=deck.getNextNewCards();
          failedCards+=failed;
          revCards+=revs;
          newCards+=news;
          eta+=deck.getETA(failed,revs,news,true);
        }
        DeckManager.closeDeck(absPath,requestingActivity);
      }
 catch (      RuntimeException e) {
        Log.e(AnkiDroidApp.TAG,"doInBackgroundGetTomorrowDue: an error occurred: " + e);
      }
    }
  }
  return new TaskData(new int[]{failedCards,revCards,newCards,eta});
}
