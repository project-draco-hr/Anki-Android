{
  try {
    if ((sOldInstance != null) && (sOldInstance.getStatus() != AsyncTask.Status.FINISHED)) {
      sOldInstance.get();
    }
  }
 catch (  Exception e) {
    Log.e(AnkiDroidApp.TAG,"doInBackground - Got exception while waiting for thread to finish: " + e.getMessage());
  }
switch (mType) {
case TASK_TYPE_LOAD_DECK:
    return doInBackgroundLoadDeck(params);
case TASK_TYPE_LOAD_DECK_AND_UPDATE_CARDS:
  TaskData taskData=doInBackgroundLoadDeck(params);
if (taskData.mInteger == DECK_LOADED) {
  taskData.mDeck.updateAllCards();
  taskData.mCard=taskData.mDeck.getCurrentCard();
}
return taskData;
case TASK_TYPE_ANSWER_CARD:
return doInBackgroundAnswerCard(params);
case TASK_TYPE_SUSPEND_CARD:
return doInBackgroundSuspendCard(params);
case TASK_TYPE_MARK_CARD:
return doInBackgroundMarkCard(params);
case TASK_TYPE_UPDATE_FACT:
return doInBackgroundUpdateFact(params);
case TASK_TYPE_UNDO:
return doInBackgroundUndo(params);
case TASK_TYPE_REDO:
return doInBackgroundRedo(params);
case TASK_LOAD_CARDS:
return doInBackgroundLoadCards(params);
default :
return null;
}
}
