{
  long start, stop;
  Deck deck=params[0].getDeck();
  Card oldCard=params[0].getCard();
  Card newCard;
  AnkiDb ankiDB=AnkiDatabaseManager.getDatabase(deck.getDeckPath());
  ankiDB.getDatabase().beginTransaction();
  try {
    if (oldCard != null) {
      start=System.currentTimeMillis();
      oldCard.suspend();
      stop=System.currentTimeMillis();
      Log.v(AnkiDroidApp.TAG,"doInBackgroundSuspendCard - Suspended card in " + (stop - start) + " ms.");
    }
    start=System.currentTimeMillis();
    newCard=deck.getCard();
    stop=System.currentTimeMillis();
    Log.v(AnkiDroidApp.TAG,"doInBackgroundSuspendCard - Loaded new card in " + (stop - start) + " ms.");
    publishProgress(new TaskData(newCard));
    ankiDB.getDatabase().setTransactionSuccessful();
  }
  finally {
    ankiDB.getDatabase().endTransaction();
  }
  return null;
}
