{
  if (mWalWarning != AnkiDb.NO_WAL_WARNING) {
    showWalWarningDialog();
    return;
  }
  SharedPreferences preferences=PrefSettings.getSharedPrefs(getBaseContext());
  String username=preferences.getString("username","");
  String password=preferences.getString("password","");
  if (AnkiDroidApp.isUserLoggedIn()) {
    Deck deck=AnkiDroidApp.deck();
    Connection.syncDeck(mSyncListener,new Connection.Payload(new Object[]{username,password,deck,mDeckFilename,conflictResolution}));
  }
 else {
    mUserNotLoggedInAlert.show();
  }
}
