{
  Resources res=getResources();
  activeCramTags.clear();
  allCramTags=AnkiDroidApp.deck().allTags_();
  View contentView=getLayoutInflater().inflate(R.layout.studyoptions_cram_dialog_contents,null);
  mCramTagsListView=(ListView)contentView.findViewById(R.id.cram_tags_list);
  mCramTagsListView.setAdapter(new ArrayAdapter<String>(this,R.layout.dialog_check_item,allCramTags));
  mCramTagsListView.setOnItemClickListener(new AdapterView.OnItemClickListener(){
    @Override public void onItemClick(    AdapterView<?> parent,    View view,    int position,    long id){
      if (((CheckedTextView)view).isChecked()) {
        activeCramTags.remove(allCramTags[position]);
      }
 else {
        activeCramTags.add(allCramTags[position]);
      }
    }
  }
);
  mCramTagsListView.setItemsCanFocus(false);
  mSpinnerCramOrder=(Spinner)contentView.findViewById(R.id.cram_order_spinner);
  mSpinnerCramOrder.setSelection(0);
  mSpinnerCramOrder.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener(){
    @Override public void onItemSelected(    AdapterView<?> parent,    View view,    int position,    long id){
      cramOrder=cramOrderList[position];
    }
    @Override public void onNothingSelected(    AdapterView<?> arg0){
      return;
    }
  }
);
  AlertDialog.Builder builder=new AlertDialog.Builder(this);
  builder.setTitle(R.string.studyoptions_cram_dialog_title);
  builder.setPositiveButton(res.getString(R.string.begin_cram),new OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      mToggleCram.setChecked(true);
      onCram();
    }
  }
);
  builder.setNegativeButton(res.getString(R.string.cancel),null);
  builder.setView(contentView);
  mCramTagsDialog=builder.create();
}
