{
  SharedPreferences preferences=PrefSettings.getSharedPrefs(getBaseContext());
  mPrefDeckPath=preferences.getString("deckPath",AnkiDroidApp.getStorageDirectory());
  mPrefStudyOptions=preferences.getBoolean("study_options",true);
  mStartupMode=Integer.parseInt(preferences.getString("startup_mode",Integer.toString(SUM_DECKPICKER_ON_FIRST_START)));
  mLastTimeOpened=preferences.getLong("lastTimeOpened",0);
  mSyncEnabled=preferences.getBoolean("syncEnabled",false);
  mSwipeEnabled=preferences.getBoolean("swipe",false);
  if (!preferences.getString("lastVersion","").equals(getVersion())) {
    Resources res=getResources();
    AlertDialog.Builder builder=new AlertDialog.Builder(this);
    builder.setTitle(res.getString(R.string.new_version_title) + " " + getVersion());
    builder.setMessage(res.getString(R.string.new_version_text));
    builder.setPositiveButton(res.getString(R.string.ok),null);
    builder.setCancelable(true);
    mNewVersion=true;
    mNewVersionAlert=builder.create();
  }
  return preferences;
}
