{
  mStudyOptionsView=getLayoutInflater().inflate(R.layout.studyoptions,null);
  Themes.setContentStyle(mStudyOptionsView,Themes.CALLER_STUDYOPTIONS);
  mStudyOptionsMain=(View)mStudyOptionsView.findViewById(R.id.studyoptions_main);
  mTextDeckName=(TextView)mStudyOptionsView.findViewById(R.id.studyoptions_deck_name);
  Themes.setTitleStyle(mTextDeckName);
  mDeckInformation=(LinearLayout)mStudyOptionsView.findViewById(R.id.studyoptions_deckinformation);
  mButtonStart=(Button)mStudyOptionsView.findViewById(R.id.studyoptions_start);
  mToggleCram=(ToggleButton)mStudyOptionsView.findViewById(R.id.studyoptions_cram);
  mToggleLimit=(ToggleButton)mStudyOptionsView.findViewById(R.id.studyoptions_limit);
  mCardBrowser=(Button)mStudyOptionsView.findViewById(R.id.studyoptions_card_browser);
  mStatisticsButton=(Button)mStudyOptionsView.findViewById(R.id.studyoptions_statistics);
  mDailyBar=(View)mStudyOptionsView.findViewById(R.id.studyoptions_daily_bar);
  mMatureBar=(View)mStudyOptionsView.findViewById(R.id.studyoptions_mature_bar);
  mGlobalLimitFrame=(View)mStudyOptionsView.findViewById(R.id.studyoptions_global_limit_bars);
  mGlobalLimitBar=(View)mStudyOptionsView.findViewById(R.id.studyoptions_global_limit_bar);
  mGlobalMatLimitBar=(View)mStudyOptionsView.findViewById(R.id.studyoptions_global_mat_limit_bar);
  mGlobalBar=(View)mStudyOptionsView.findViewById(R.id.studyoptions_global_bar);
  mGlobalMatBar=(View)mStudyOptionsView.findViewById(R.id.studyoptions_global_mat_bar);
  mBarsMax=(View)mStudyOptionsView.findViewById(R.id.studyoptions_bars_max);
  if (mDailyBar != null) {
    ViewTreeObserver vto=mBarsMax.getViewTreeObserver();
    vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener(){
      @Override public void onGlobalLayout(){
        mBarsMax.getViewTreeObserver().removeGlobalOnLayoutListener(this);
        updateStatisticBars();
      }
    }
);
  }
  mTextTodayNew=(TextView)mStudyOptionsView.findViewById(R.id.studyoptions_today_new);
  mTextTodayNew.setText("    ");
  mTextTodayLrn=(TextView)mStudyOptionsView.findViewById(R.id.studyoptions_today_lrn);
  mTextTodayRev=(TextView)mStudyOptionsView.findViewById(R.id.studyoptions_today_rev);
  mTextNewTotal=(TextView)mStudyOptionsView.findViewById(R.id.studyoptions_new_total);
  mTextTotal=(TextView)mStudyOptionsView.findViewById(R.id.studyoptions_total);
  mTextETA=(TextView)mStudyOptionsView.findViewById(R.id.studyoptions_eta);
  mNightMode=(CheckBox)mStudyOptionsView.findViewById(R.id.studyoptions_night_mode);
  mNightMode.setChecked(mInvertedColors);
  mNightMode.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener(){
    @Override public void onCheckedChanged(    CompoundButton buttonView,    boolean isChecked){
      if (mInvertedColors != isChecked) {
        mInvertedColors=isChecked;
        savePreferences("invertedColors");
      }
    }
  }
);
  mSwapQA=(CheckBox)mStudyOptionsView.findViewById(R.id.studyoptions_swap);
  mSwapQA.setChecked(mSwap);
  mSwapQA.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View view){
      if (mSwapQA.isChecked()) {
        showDialog(DIALOG_SWAP_QA);
      }
 else       if (mSwap) {
        mSwap=false;
        savePreferences("swapqa");
      }
      mSwapQA.setChecked(false);
    }
  }
);
  mButtonStart.setOnClickListener(mButtonClickListener);
  mToggleCram.setOnClickListener(mButtonClickListener);
  mToggleLimit.setOnClickListener(mButtonClickListener);
  mCardBrowser.setOnClickListener(mButtonClickListener);
  mStatisticsButton.setOnClickListener(mButtonClickListener);
  mCongratsView=getLayoutInflater().inflate(R.layout.studyoptions_congrats,null);
  Themes.setWallpaper(mCongratsView);
  Themes.setTitleStyle(mCongratsView.findViewById(R.id.studyoptions_congrats_title));
  mTextCongratsMessage=(TextView)mCongratsView.findViewById(R.id.studyoptions_congrats_message);
  Themes.setTextViewStyle(mTextCongratsMessage);
  mTextCongratsMessage.setOnClickListener(mButtonClickListener);
  mButtonCongratsLearnMore=(Button)mCongratsView.findViewById(R.id.studyoptions_congrats_learnmore);
  mButtonCongratsReviewEarly=(Button)mCongratsView.findViewById(R.id.studyoptions_congrats_reviewearly);
  mButtonCongratsSyncDeck=(Button)mCongratsView.findViewById(R.id.studyoptions_congrats_syncdeck);
  mButtonCongratsOpenOtherDeck=(Button)mCongratsView.findViewById(R.id.studyoptions_congrats_open_other_deck);
  mButtonCongratsFinish=(Button)mCongratsView.findViewById(R.id.studyoptions_congrats_finish);
  mButtonCongratsLearnMore.setOnClickListener(mButtonClickListener);
  mButtonCongratsReviewEarly.setOnClickListener(mButtonClickListener);
  mButtonCongratsSyncDeck.setOnClickListener(mButtonClickListener);
  mButtonCongratsOpenOtherDeck.setOnClickListener(mButtonClickListener);
  mButtonCongratsFinish.setOnClickListener(mButtonClickListener);
  mNoExternalStorageView=getLayoutInflater().inflate(R.layout.studyoptions_nostorage,null);
  Themes.setWallpaper(mNoExternalStorageView);
  Themes.setTitleStyle(mNoExternalStorageView.findViewById(R.id.studyoptions_nostorage_title));
  Themes.setTextViewStyle(mNoExternalStorageView.findViewById(R.id.studyoptions_nostorage_message));
}
