{
  View contentView=getLayoutInflater().inflate(R.layout.studyoptions_limit_dialog_contents,null);
  mEditSessionTime=(EditText)contentView.findViewById(R.id.studyoptions_session_minutes);
  mEditSessionQuestions=(EditText)contentView.findViewById(R.id.studyoptions_session_questions);
  mSessionLimitCheckBox=(CheckBox)contentView.findViewById(R.id.studyoptions_limit_session_check);
  mLimitTagsCheckBox=(CheckBox)contentView.findViewById(R.id.studyoptions_limit_tag_check);
  mLimitTagNewActiveCheckBox=(CheckBox)contentView.findViewById(R.id.studyoptions_limit_tag_new_active_check);
  mLimitTagNewInactiveCheckBox=(CheckBox)contentView.findViewById(R.id.studyoptions_limit_tag_new_inactive_check);
  mLimitTagRevActiveCheckBox=(CheckBox)contentView.findViewById(R.id.studyoptions_limit_tag_rev_active_check);
  mLimitTagRevInactiveCheckBox=(CheckBox)contentView.findViewById(R.id.studyoptions_limit_tag_rev_inactive_check);
  mLimitSessionTv1=(TextView)contentView.findViewById(R.id.studyoptions_limit_session_tv1);
  mLimitSessionTv2=(TextView)contentView.findViewById(R.id.studyoptions_limit_session_tv2);
  mLimitTagTv1=(TextView)contentView.findViewById(R.id.studyoptions_limit_tag_tv1);
  mLimitTagTv2=(TextView)contentView.findViewById(R.id.studyoptions_limit_tag_tv2);
  mLimitTagTv3=(TextView)contentView.findViewById(R.id.studyoptions_limit_tag_tv3);
  mLimitTagTv4=(TextView)contentView.findViewById(R.id.studyoptions_limit_tag_tv4);
  mLimitTagTv5=(TextView)contentView.findViewById(R.id.studyoptions_limit_tag_tv5);
  mLimitTagTv6=(TextView)contentView.findViewById(R.id.studyoptions_limit_tag_tv6);
  mLimitTagTv2.setOnClickListener(mButtonClickListener);
  mLimitTagTv3.setOnClickListener(mButtonClickListener);
  mLimitTagTv5.setOnClickListener(mButtonClickListener);
  mLimitTagTv6.setOnClickListener(mButtonClickListener);
  mSessionLimitCheckBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener(){
    @Override public void onCheckedChanged(    CompoundButton buttonView,    boolean isChecked){
      mEditSessionTime.setEnabled(isChecked);
      mEditSessionQuestions.setEnabled(isChecked);
      if (!isChecked) {
        mEditSessionTime.setText("");
        mEditSessionQuestions.setText("");
        mEditSessionTime.clearFocus();
        mEditSessionQuestions.clearFocus();
        ((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE)).hideSoftInputFromWindow(mEditSessionTime.getWindowToken(),0);
      }
      int color=getResources().getColor((isChecked) ? R.color.studyoptions_foreground : R.color.studyoptions_foreground_deactivated);
      mLimitSessionTv1.setTextColor(color);
      mLimitSessionTv2.setTextColor(color);
    }
  }
);
  mLimitTagsCheckBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener(){
    @Override public void onCheckedChanged(    CompoundButton buttonView,    boolean isChecked){
      mLimitTagNewActiveCheckBox.setEnabled(isChecked);
      mLimitTagNewInactiveCheckBox.setEnabled(isChecked);
      mLimitTagRevActiveCheckBox.setEnabled(isChecked);
      mLimitTagRevInactiveCheckBox.setEnabled(isChecked);
      if (!isChecked) {
        mLimitTagNewActiveCheckBox.setChecked(false);
        mLimitTagNewInactiveCheckBox.setChecked(false);
        mLimitTagRevActiveCheckBox.setChecked(false);
        mLimitTagRevInactiveCheckBox.setChecked(false);
      }
      int color=getResources().getColor((isChecked) ? R.color.studyoptions_foreground : R.color.studyoptions_foreground_deactivated);
      mLimitTagTv1.setTextColor(color);
      mLimitTagTv2.setTextColor(color);
      mLimitTagTv3.setTextColor(color);
      mLimitTagTv4.setTextColor(color);
      mLimitTagTv5.setTextColor(color);
      mLimitTagTv6.setTextColor(color);
    }
  }
);
  mLimitTagNewActiveCheckBox.setOnCheckedChangeListener(mLimitTagCheckedChangeListener);
  mLimitTagNewInactiveCheckBox.setOnCheckedChangeListener(mLimitTagCheckedChangeListener);
  mLimitTagRevActiveCheckBox.setOnCheckedChangeListener(mLimitTagCheckedChangeListener);
  mLimitTagRevInactiveCheckBox.setOnCheckedChangeListener(mLimitTagCheckedChangeListener);
  AlertDialog.Builder builder=new AlertDialog.Builder(this);
  builder.setTitle(R.string.studyoptions_limit_dialog_title);
  builder.setView(contentView);
  return builder.create();
}
