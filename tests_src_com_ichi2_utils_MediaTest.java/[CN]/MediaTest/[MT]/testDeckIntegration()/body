{
  Collection d=new Shared().getEmptyDeck();
  File dir=new File(d.getMedia().dir());
  BackupManager.removeDir(dir);
  dir.mkdirs();
  File file=new File(dir,"fake.png");
  file.createNewFile();
  d.getMedia().addFile(file.getAbsolutePath());
  Note f=d.newNote();
  f.setitem("Front","one");
  f.setitem("Back","<img src='fake.png'>");
  d.addNote(f);
  f=d.newNote();
  f.setitem("Front","one");
  f.setitem("Back","<img src='fake2.png'>");
  d.addNote(f);
  FileOutputStream os;
  os=new FileOutputStream(new File(dir,"foo.jpg").getAbsolutePath(),false);
  os.write("test".getBytes());
  os.close();
  List<List<String>> ret=d.getMedia().check();
  List<String> expected;
  List<String> actual;
  expected=Arrays.asList("fake2.png");
  actual=ret.get(0);
  actual.retainAll(expected);
  assertEquals(expected.size(),actual.size());
  expected=Arrays.asList("foo.jpg");
  actual=ret.get(1);
  actual.retainAll(expected);
  assertEquals(expected.size(),actual.size());
}
