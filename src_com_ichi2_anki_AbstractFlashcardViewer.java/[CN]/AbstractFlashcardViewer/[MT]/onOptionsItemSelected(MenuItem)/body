{
  if (mDrawerToggle.onOptionsItemSelected(item)) {
    return true;
  }
switch (item.getItemId()) {
case android.R.id.home:
    closeReviewer(AnkiDroidApp.RESULT_TO_HOME,true);
  return true;
case R.id.action_undo:
undo();
return true;
case R.id.action_clear_whiteboard:
mWhiteboard.clear();
return true;
case R.id.action_mark_card:
DeckTask.launchDeckTask(DeckTask.TASK_TYPE_MARK_CARD,mMarkCardHandler,new DeckTask.TaskData(mSched,mCurrentCard,0));
return true;
case R.id.action_replay:
playSounds(true);
return true;
case R.id.action_edit:
return editCard();
case R.id.action_bury_card:
DeckTask.launchDeckTask(DeckTask.TASK_TYPE_DISMISS_NOTE,mDismissCardHandler,new DeckTask.TaskData(mSched,mCurrentCard,4));
return true;
case R.id.action_bury_note:
DeckTask.launchDeckTask(DeckTask.TASK_TYPE_DISMISS_NOTE,mDismissCardHandler,new DeckTask.TaskData(mSched,mCurrentCard,0));
return true;
case R.id.action_suspend_card:
DeckTask.launchDeckTask(DeckTask.TASK_TYPE_DISMISS_NOTE,mDismissCardHandler,new DeckTask.TaskData(mSched,mCurrentCard,1));
return true;
case R.id.action_suspend_note:
DeckTask.launchDeckTask(DeckTask.TASK_TYPE_DISMISS_NOTE,mDismissCardHandler,new DeckTask.TaskData(mSched,mCurrentCard,2));
return true;
case R.id.action_delete:
showDeleteNoteDialog();
return true;
case R.id.action_whiteboard:
long deckID;
try {
deckID=mSched.getCol().getDecks().current().getLong("id");
}
 catch (JSONException e) {
throw new RuntimeException(e);
}
mShowWhiteboard=!mShowWhiteboard;
if (mShowWhiteboard) {
mWhiteboard.setVisibility(View.VISIBLE);
item.setTitle(R.string.hide_whiteboard);
MetaDB.storeWhiteboardState(this,deckID,1);
}
 else {
mWhiteboard.setVisibility(View.GONE);
item.setTitle(R.string.show_whiteboard);
MetaDB.storeWhiteboardState(this,deckID,0);
}
refreshActionBar();
return true;
case R.id.action_search_dictionary:
lookUpOrSelectText();
return true;
default :
return super.onOptionsItemSelected(item);
}
}
