{
  getMenuInflater().inflate(R.menu.reviewer,menu);
  Resources res=getResources();
  if (mCurrentCard != null && mCurrentCard.note().hasTag("marked")) {
    menu.findItem(R.id.action_mark_card).setTitle(R.string.menu_unmark_card).setIcon(R.drawable.ic_menu_marked);
  }
 else {
    menu.findItem(R.id.action_mark_card).setTitle(R.string.menu_mark_card).setIcon(R.drawable.ic_menu_mark);
  }
  if (AnkiDroidApp.colIsOpen() && AnkiDroidApp.getCol().undoAvailable()) {
    menu.findItem(R.id.action_undo).setEnabled(true).setIcon(R.drawable.ic_menu_revert);
  }
 else {
    menu.findItem(R.id.action_undo).setEnabled(false).setIcon(R.drawable.ic_menu_revert_disabled);
  }
  if (mPrefWhiteboard) {
    if (mShowWhiteboard) {
      menu.findItem(R.id.action_whiteboard).setVisible(true).setTitle(R.string.hide_whiteboard);
      menu.findItem(R.id.action_clear_whiteboard).setVisible(true);
    }
 else {
      menu.findItem(R.id.action_whiteboard).setVisible(true).setTitle(R.string.show_whiteboard);
      menu.findItem(R.id.action_clear_whiteboard).setVisible(false);
    }
  }
  if (AnkiDroidApp.SDK_VERSION < 11 && !mDisableClipboard) {
    menu.findItem(R.id.action_search_dictionary).setVisible(true).setEnabled(!mShowWhiteboard).setTitle(clipboardHasText() ? Lookup.getSearchStringTitle() : res.getString(R.string.menu_select));
  }
  return super.onCreateOptionsMenu(menu);
}
