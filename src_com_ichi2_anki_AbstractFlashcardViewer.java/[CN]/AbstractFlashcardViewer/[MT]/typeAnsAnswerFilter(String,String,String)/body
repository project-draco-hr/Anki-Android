{
  Matcher m=sTypeAnsPat.matcher(buf);
  DiffEngine diff=new DiffEngine();
  String diffUserAnswer=diff.diff_prettyHtml(diff.diff_main(userAnswer,correctAnswer),mNightMode);
  if (userAnswer.equals(correctAnswer)) {
    return m.replaceFirst("<div><code id=typeans>" + diffUserAnswer + "\u2714</code></div>");
  }
 else {
    return m.replaceFirst("<div><code id=typeans>" + diffUserAnswer + "<br>&darr;<br>"+ diff.diff_prettyHtml(diff.diff_main(correctAnswer,correctAnswer),mNightMode)+ "</code></div>");
  }
}
