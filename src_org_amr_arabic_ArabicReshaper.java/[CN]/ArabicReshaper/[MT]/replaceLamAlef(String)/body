{
  int wordLength=unshapedWord.length();
  char[] wordLetters=new char[wordLength];
  unshapedWord.getChars(0,wordLength,wordLetters,0);
  char letterBefore=0;
  for (int index=0; index < wordLetters.length - 1; index++) {
    if (!isHaraka(wordLetters[index]) && (int)DEFINED_CHARACTERS_ORGINAL_LAM != (int)wordLetters[index]) {
      letterBefore=wordLetters[index];
    }
    if ((int)DEFINED_CHARACTERS_ORGINAL_LAM == (int)wordLetters[index]) {
      char candidateLam=wordLetters[index];
      int lamPosition=index;
      int harakaPosition=lamPosition + 1;
      while (harakaPosition < wordLetters.length && isHaraka(wordLetters[harakaPosition])) {
        harakaPosition++;
      }
      if (harakaPosition < wordLetters.length) {
        char lamAlef=0;
        if (lamPosition > 0 && getGlphyType(letterBefore) > 2)         lamAlef=getLamAlef(wordLetters[harakaPosition],candidateLam,false);
 else {
          lamAlef=getLamAlef(wordLetters[harakaPosition],candidateLam,true);
        }
        if (lamAlef != (char)0) {
          wordLetters[lamPosition]=lamAlef;
          wordLetters[harakaPosition]=' ';
        }
      }
    }
  }
  unshapedWord=new String(wordLetters);
  unshapedWord=unshapedWord.replaceAll(" ","");
  return unshapedWord.trim();
}
