{
  super.onCreate(savedInstanceState);
  mPrefMan=getPreferenceManager();
  mPrefMan.setSharedPreferencesName(PrefSettings.SHARED_PREFS_NAME);
  addPreferencesFromResource(R.xml.preferences);
  getPreferenceScreen().getSharedPreferences().registerOnSharedPreferenceChangeListener(this);
  swipeCheckboxPreference=(CheckBoxPreference)getPreferenceScreen().findPreference("swipe");
  zoomCheckboxPreference=(CheckBoxPreference)getPreferenceScreen().findPreference("zoom");
  keepScreenOnCheckBoxPreference=(CheckBoxPreference)getPreferenceScreen().findPreference("keepScreenOn");
  showAnswerCheckBoxPreference=(CheckBoxPreference)getPreferenceScreen().findPreference("timeoutAnswer");
  animationsCheckboxPreference=(CheckBoxPreference)getPreferenceScreen().findPreference("themeAnimations");
  walModePreference=(CheckBoxPreference)getPreferenceScreen().findPreference("walMode");
  useBackupPreference=(CheckBoxPreference)getPreferenceScreen().findPreference("useBackup");
  asyncModePreference=(CheckBoxPreference)getPreferenceScreen().findPreference("asyncMode");
  eInkDisplayPreference=(CheckBoxPreference)getPreferenceScreen().findPreference("eInkDisplay");
  walModeInitiallySet=mPrefMan.getSharedPreferences().getBoolean("walMode",false);
  ListPreference listpref=(ListPreference)getPreferenceScreen().findPreference("theme");
  animationsCheckboxPreference.setEnabled(listpref.getValue().equals("2"));
  zoomCheckboxPreference.setEnabled(!swipeCheckboxPreference.isChecked());
  initializeLanguageDialog();
  initializeCustomFontsDialog();
  for (  String key : mShowValueInSummList) {
    updateListPreference(key);
  }
  for (  String key : mShowValueInSummSeek) {
    updateSeekBarPreference(key);
  }
  enableWalSupport();
}
