{
  Log.d(AnkiDroidApp.TAG,"DeckManager.CloseDeckAsyncTask.doInBackground()");
  String deckpath=params[0].mDeckPath;
  int requestingActivity=params[0].mCaller;
  DeckInformation di=sLoadedDecks.get(deckpath);
  if (di.mOpenedBy.contains(REQUESTING_ACTIVITY_STUDYOPTIONS) && requestingActivity != REQUESTING_ACTIVITY_STUDYOPTIONS) {
    di.mWaitForDeckTaskToFinish=true;
    DeckTask.waitToFinish();
    if (this.isCancelled()) {
      return null;
    }
    di.mWaitForDeckTaskToFinish=false;
  }
  try {
    di.mDeck.closeDeck(false);
    Log.e(AnkiDroidApp.TAG,"DeckManager.CloseDeckAsyncTask: deck " + deckpath + " successfully closed");
  }
 catch (  RuntimeException e) {
    Log.e(AnkiDroidApp.TAG,"DeckManager.CloseDeckAsyncTask: could not close deck " + deckpath + ": "+ e);
  }
  return di;
}
