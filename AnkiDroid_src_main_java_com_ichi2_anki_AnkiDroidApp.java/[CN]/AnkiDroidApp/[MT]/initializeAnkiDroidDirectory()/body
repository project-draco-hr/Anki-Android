{
  SharedPreferences preferences=getSharedPrefs(sInstance);
  String path=preferences.getString("deckPath",null);
  if (TextUtils.isEmpty(path)) {
    SharedPreferences.Editor editor=preferences.edit();
    editor.putString("deckPath",getDefaultAnkiDroidDirectory());
    editor.commit();
  }
  File dir=new File(getCurrentAnkiDroidDirectory());
  if (!dir.exists() && !dir.mkdirs()) {
    Timber.e("Failed to create AnkiDroid directory");
  }
  if (!dir.canWrite()) {
    Timber.e("No write access to AnkiDroid directory");
  }
  File nomedia=new File(dir,".nomedia");
  if (!nomedia.exists()) {
    try {
      nomedia.createNewFile();
    }
 catch (    IOException e) {
      Timber.e("Failed to create .nomedia file");
    }
  }
}
