{
switch (item.getItemId()) {
case MENU_COPY_CARD:
case MENU_ADD_CARD:
    Intent intent=new Intent(CardEditor.this,CardEditor.class);
  intent.putExtra(EXTRA_CALLER,CALLER_CARDEDITOR);
if (item.getItemId() == MENU_COPY_CARD) {
  intent.putExtra(EXTRA_CONTENTS,getFieldsText());
}
startActivityForResult(intent,REQUEST_ADD);
if (Integer.valueOf(android.os.Build.VERSION.SDK) > 4) {
ActivityTransitionAnimation.slide(CardEditor.this,ActivityTransitionAnimation.LEFT);
}
return true;
case MENU_RESET:
if (mAddNote) {
if (mCaller == CALLER_INDICLASH || mCaller == CALLER_CARDEDITOR_INTENT_ADD) {
resetEditFields(mSourceText);
}
 else {
setEditFieldTexts(getIntent().getStringExtra(EXTRA_CONTENTS));
if (!mEditFields.isEmpty()) {
mEditFields.getFirst().requestFocus();
}
}
}
 else {
populateEditFields();
}
return true;
case MENU_LOOKUP:
View focus=this.getWindow().getCurrentFocus();
if (focus instanceof FieldEditText) {
FieldEditText field=(FieldEditText)focus;
if (!field.isSelected()) {
field.selectAll();
}
Lookup.lookUp(field.getText().toString().substring(field.getSelectionStart(),field.getSelectionEnd()),null);
}
return true;
case MENU_RESET_CARD_PROGRESS:
showDialog(DIALOG_RESET_CARD);
return true;
case MENU_SAVED_INTENT:
showDialog(DIALOG_INTENT_INFORMATION);
return true;
case android.R.id.home:
closeCardEditor(AnkiDroidApp.RESULT_TO_HOME);
return true;
}
return false;
}
