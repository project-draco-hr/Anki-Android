{
switch (item.getItemId()) {
case MENU_COPY_CARD:
case MENU_ADD_CARD:
    Intent intent=new Intent(CardEditor.this,CardEditor.class);
  intent.putExtra(EXTRA_CALLER,CALLER_CARDEDITOR);
intent.putExtra(EXTRA_DECKPATH,mDeckPath);
if (item.getItemId() == MENU_COPY_CARD) {
StringBuilder contents=new StringBuilder();
for (FieldEditText current : mEditFields) {
  contents.append(current.getText().toString()).append("\u001f");
}
intent.putExtra(EXTRA_CONTENTS,contents.toString());
}
startActivityForResult(intent,REQUEST_ADD);
if (Integer.valueOf(android.os.Build.VERSION.SDK) > 4) {
ActivityTransitionAnimation.slide(CardEditor.this,ActivityTransitionAnimation.LEFT);
}
return true;
case MENU_RESET:
if (mAddFact) {
if (mCaller == CALLER_INDICLASH || mCaller == CALLER_CARDEDITOR_INTENT_ADD) {
if (mSourceText != null) {
mEditFields.get(0).setText(mSourceText);
}
if (mTargetText != null) {
mEditFields.get(1).setText(mTargetText);
}
}
 else {
setEditFieldTexts(getIntent().getStringExtra(EXTRA_CONTENTS));
if (!mEditFields.isEmpty()) {
mEditFields.getFirst().requestFocus();
}
}
}
 else {
populateEditFields();
}
return true;
case MENU_LOOKUP:
View focus=this.getWindow().getCurrentFocus();
if (focus instanceof FieldEditText) {
FieldEditText field=(FieldEditText)focus;
if (!field.isSelected()) {
field.selectAll();
}
Lookup.lookUp(field.getText().toString().substring(field.getSelectionStart(),field.getSelectionEnd()),null);
}
return true;
case MENU_RESET_CARD_PROGRESS:
showDialog(DIALOG_RESET_CARD);
return true;
case MENU_SAVED_INTENT:
showDialog(DIALOG_INTENT_INFORMATION);
return true;
}
return false;
}
