{
  getMenuInflater().inflate(R.menu.card_editor,menu);
  if (!mAddNote) {
    menu.findItem(R.id.action_add_card_from_card_editor).setVisible(true);
    menu.findItem(R.id.action_reset_card_progress).setVisible(true);
    menu.findItem(R.id.action_preview).setVisible(true);
  }
  if (mEditFields != null) {
    for (int i=0; i < mEditFields.size(); i++) {
      if (mEditFields.get(i).getText().length() > 0) {
        menu.findItem(R.id.action_copy_card).setEnabled(true);
        break;
      }
 else       if (i == mEditFields.size() - 1) {
        menu.findItem(R.id.action_copy_card).setEnabled(false);
      }
    }
  }
  if (mCaller != CALLER_CARDEDITOR_INTENT_ADD) {
    mIntentInformation=MetaDB.getIntentInformation(this);
    menu.findItem(R.id.action_saved_notes).setEnabled(mIntentInformation.size() > 0);
  }
  return super.onCreateOptionsMenu(menu);
}
