{
  Resources res=getResources();
  AlertDialog.Builder builder=new AlertDialog.Builder(this);
  View contentView=getLayoutInflater().inflate(R.layout.edittext,null);
  mNewTagEditText=(EditText)contentView.findViewById(R.id.edit_text);
  builder.setView(contentView);
  builder.setTitle(res.getString(R.string.add_new_tag));
  builder.setPositiveButton(res.getString(R.string.add),new OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      String tag=mNewTagEditText.getText().toString();
      if (tag.equals("")) {
        mTagsDialog.show();
      }
 else {
        String[] oldTags=allTags;
        Log.i(AnkiDroidApp.TAG,"all tags: " + Arrays.toString(oldTags));
        allTags=new String[oldTags.length + 1];
        allTags[0]=oldTags[0];
        allTags[1]=tag;
        for (int i=1; i < oldTags.length; i++) {
          allTags[i + 1]=oldTags[i];
        }
        recreateTagsDialog();
        mTagsDialog.show();
      }
    }
  }
);
  builder.setNegativeButton(res.getString(R.string.cancel),new OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      mTagsDialog.show();
    }
  }
);
  builder.setOnCancelListener(new OnCancelListener(){
    @Override public void onCancel(    DialogInterface dialog){
      mTagsDialog.show();
    }
  }
);
  mAddNewTag=builder.create();
}
