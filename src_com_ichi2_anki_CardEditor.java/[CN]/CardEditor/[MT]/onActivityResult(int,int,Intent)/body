{
  super.onActivityResult(requestCode,resultCode,data);
  if (resultCode == DeckPicker.RESULT_DB_ERROR) {
    closeCardEditor(DeckPicker.RESULT_DB_ERROR);
  }
  if (resultCode == AnkiDroidApp.RESULT_TO_HOME) {
    closeCardEditor(AnkiDroidApp.RESULT_TO_HOME);
  }
switch (requestCode) {
case REQUEST_INTENT_ADD:
    if (resultCode != RESULT_CANCELED) {
      mChanged=true;
      String id=data.getStringExtra(EXTRA_ID);
      if (id != null) {
        for (int i=0; i < mIntentInformation.size(); i++) {
          if (mIntentInformation.get(i).get("id").endsWith(id)) {
            if (MetaDB.removeIntentInformation(CardEditor.this,id)) {
              mIntentInformation.remove(i);
              mIntentInformationAdapter.notifyDataSetChanged();
            }
            break;
          }
        }
      }
    }
  if (mIntentInformation.size() > 0) {
    showDialog(DIALOG_INTENT_INFORMATION);
  }
break;
case REQUEST_ADD:
if (resultCode != RESULT_CANCELED) {
mChanged=true;
}
break;
case REQUEST_MULTIMEDIA_EDIT:
if (resultCode != RESULT_CANCELED) {
Bundle extras=data.getExtras();
int index=extras.getInt(EditFieldActivity.EXTRA_RESULT_FIELD_INDEX);
IField field=(IField)extras.get(EditFieldActivity.EXTRA_RESULT_FIELD);
IMultimediaEditableNote mNote=NoteService.createEmptyNote(mEditorNote.model());
NoteService.updateMultimediaNoteFromJsonNote(mEditorNote,mNote);
mNote.setField(index,field);
mEditFields.get(index).setText(field.getFormattedValue());
NoteService.saveMedia((MultimediaEditableNote)mNote);
mChanged=true;
}
break;
}
}
