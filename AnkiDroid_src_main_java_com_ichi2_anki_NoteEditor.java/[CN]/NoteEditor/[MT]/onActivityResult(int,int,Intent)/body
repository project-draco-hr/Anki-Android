{
  super.onActivityResult(requestCode,resultCode,data);
  if (resultCode == DeckPicker.RESULT_DB_ERROR) {
    closeNoteEditor(DeckPicker.RESULT_DB_ERROR);
  }
switch (requestCode) {
case REQUEST_ADD:
    if (resultCode != RESULT_CANCELED) {
      mChanged=true;
    }
  break;
case REQUEST_MULTIMEDIA_EDIT:
if (resultCode != RESULT_CANCELED) {
  Collection col=getCol();
  Bundle extras=data.getExtras();
  int index=extras.getInt(EditFieldActivity.EXTRA_RESULT_FIELD_INDEX);
  IField field=(IField)extras.get(EditFieldActivity.EXTRA_RESULT_FIELD);
  IMultimediaEditableNote mNote=NoteService.createEmptyNote(mEditorNote.model());
  NoteService.updateMultimediaNoteFromJsonNote(col,mEditorNote,mNote);
  mNote.setField(index,field);
  mEditFields.get(index).setText(field.getFormattedValue());
  NoteService.saveMedia(col,(MultimediaEditableNote)mNote);
  mChanged=true;
}
break;
case REQUEST_TEMPLATE_EDIT:
updateCards(mEditorNote.model());
}
}
