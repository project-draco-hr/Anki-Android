{
  final int refreshInterval=50;
  int numRendered=0;
  Log.i(AnkiDroidApp.TAG,"doInBackgroundRenderBrowserQA");
  Collection col=(Collection)params[0].getObjArray()[0];
  ArrayList<HashMap<String,String>> items=(ArrayList<HashMap<String,String>>)params[0].getObjArray()[1];
  for (  HashMap<String,String> item : items) {
    HashMap<String,String> qa=col.getCard(Long.parseLong(item.get("id"),10))._getQA(true,true);
    item.put("q",formatQA(qa.get("q")));
    item.put("a",formatQA(qa.get("a")));
    if (DeckTask.taskIsCancelled()) {
      return null;
    }
 else {
      numRendered++;
      if (numRendered % refreshInterval == 0 || numRendered < 3) {
        TaskData result=new TaskData(items);
        publishProgress(result);
      }
    }
  }
  TaskData result=new TaskData(items);
  publishProgress(result);
  return result;
}
