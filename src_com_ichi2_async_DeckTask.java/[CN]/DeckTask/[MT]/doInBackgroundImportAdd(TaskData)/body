{
  Log.i(AnkiDroidApp.TAG,"doInBackgroundImportAdd");
  Collection col=params[0].getCollection();
  String path=params[0].getString();
  boolean clean=params[0].getBoolean();
  Anki2Importer imp=new Anki2Importer(col,path);
  int addedCount=-1;
  try {
    AnkiDb ankiDB=col.getDb();
    ankiDB.getDatabase().beginTransaction();
    try {
      addedCount=imp.run();
      ankiDB.getDatabase().setTransactionSuccessful();
    }
  finally {
      ankiDB.getDatabase().endTransaction();
      if (clean) {
        File tmpFile=new File(path);
        tmpFile.delete();
      }
    }
    if (addedCount >= 0) {
      ankiDB.execute("VACUUM");
      ankiDB.execute("ANALYZE");
    }
    Object[] counts=null;
    if (addedCount != -1) {
      DeckTask.TaskData result=doInBackgroundLoadDeckCounts(new TaskData(col));
      if (result != null) {
        counts=result.getObjArray();
      }
    }
    return new TaskData(addedCount,counts,true);
  }
 catch (  RuntimeException e) {
    Log.e(AnkiDroidApp.TAG,"doInBackgroundImportAdd - RuntimeException on importing cards: " + e);
    AnkiDroidApp.saveExceptionReportFile(e,"doInBackgroundImportAdd");
    return new TaskData(false);
  }
}
