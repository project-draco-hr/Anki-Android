{
  Log.i(AnkiDroidApp.TAG,"doInBackgroundLoadStatistics");
  Collection col=params[0].getCollection();
  int type=params[0].getInt();
  boolean wholeCollection=params[0].getBoolean();
  Stats stats=new Stats(col,wholeCollection);
switch (type) {
default :
case Stats.TYPE_FORECAST:
    return new TaskData(stats.calculateDue(AnkiDroidApp.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).getInt("statsType",Stats.TYPE_MONTH)));
case Stats.TYPE_REVIEW_COUNT:
  return new TaskData(stats.calculateDone(AnkiDroidApp.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).getInt("statsType",Stats.TYPE_MONTH),true));
case Stats.TYPE_REVIEW_TIME:
return new TaskData(stats.calculateDone(AnkiDroidApp.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).getInt("statsType",Stats.TYPE_MONTH),false));
case Stats.TYPE_INTERVALS:
return new TaskData(stats.calculateIntervals(AnkiDroidApp.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).getInt("statsType",Stats.TYPE_MONTH)));
case Stats.TYPE_HOURLY_BREAKDOWN:
return new TaskData(stats.calculateBreakdown(AnkiDroidApp.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).getInt("statsType",Stats.TYPE_MONTH)));
case Stats.TYPE_WEEKLY_BREAKDOWN:
return new TaskData(stats.calculateWeeklyBreakdown(AnkiDroidApp.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).getInt("statsType",Stats.TYPE_MONTH)));
case Stats.TYPE_ANSWER_BUTTONS:
return new TaskData(stats.calculateAnswerButtons(AnkiDroidApp.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).getInt("statsType",Stats.TYPE_MONTH)));
case Stats.TYPE_CARDS_TYPES:
return new TaskData(stats.calculateCardsTypes(AnkiDroidApp.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).getInt("statsType",Stats.TYPE_MONTH)));
}
}
