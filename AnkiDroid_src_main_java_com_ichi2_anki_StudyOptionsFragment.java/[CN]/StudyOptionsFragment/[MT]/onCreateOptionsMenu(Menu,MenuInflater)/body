{
  getActivity().getMenuInflater().inflate(R.menu.study_options_fragment,menu);
  SharedPreferences preferences=AnkiDroidApp.getSharedPrefs(getActivity());
  if (preferences.getBoolean("invertedColors",false)) {
    menu.findItem(R.id.action_night_mode).setIcon(R.drawable.ic_menu_night_checked);
  }
 else {
    menu.findItem(R.id.action_night_mode).setIcon(R.drawable.ic_menu_night);
  }
  if (!getCol().undoAvailable()) {
    menu.findItem(R.id.action_undo).setVisible(false);
  }
 else {
    menu.findItem(R.id.action_undo).setVisible(true);
    Resources res=AnkiDroidApp.getAppResources();
    menu.findItem(R.id.action_undo).setTitle(res.getString(R.string.studyoptions_congrats_undo,getCol().undoName(res)));
  }
  super.onCreateOptionsMenu(menu,inflater);
}
