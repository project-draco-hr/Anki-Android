{
  super.onCreate(savedInstanceState);
  Resources res=getResources();
  final Long did=getArguments().getLong("did",-1L);
  mIncludeSched=did == -1L;
  final String[] items={res.getString(R.string.export_include_schedule),res.getString(R.string.export_include_media)};
  final boolean[] checked={mIncludeSched,mIncludeMedia};
  MaterialDialog.Builder builder=new MaterialDialog.Builder(getActivity()).title(res.getString(R.string.export)).content(getArguments().getString("dialogMessage")).positiveText(res.getString(R.string.ok)).negativeText(res.getString(R.string.cancel)).cancelable(true).items(items).itemsCallbackMultiChoice(new Integer[]{INCLUDE_SCHED},new MaterialDialog.ListCallbackMulti(){
    @Override public void onSelection(    MaterialDialog materialDialog,    Integer[] integers,    CharSequence[] charSequences){
      for (int i=0; i < integers.length; i++) {
switch (integers[i]) {
case INCLUDE_SCHED:
          mIncludeSched=!mIncludeSched;
        break;
case INCLUDE_MEDIA:
      mIncludeMedia=!mIncludeMedia;
    break;
}
}
}
}
).callback(new MaterialDialog.ButtonCallback(){
@Override public void onPositive(MaterialDialog dialog){
((ExportDialogListener)getActivity()).exportApkg(null,did != -1L ? did : null,mIncludeSched,mIncludeMedia);
dismissAllDialogFragments();
}
@Override public void onNegative(MaterialDialog dialog){
dismissAllDialogFragments();
}
}
);
return builder.show();
}
