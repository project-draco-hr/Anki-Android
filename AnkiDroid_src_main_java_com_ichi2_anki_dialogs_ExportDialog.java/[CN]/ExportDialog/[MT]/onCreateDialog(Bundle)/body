{
  super.onCreate(savedInstanceState);
  Resources res=getResources();
  final Long did=getArguments().getLong("did",-1L);
  mIncludeSched=did == -1L;
  final String[] items={res.getString(R.string.export_include_schedule),res.getString(R.string.export_include_media)};
  final boolean[] checked={mIncludeSched,mIncludeMedia};
  StyledDialog.Builder builder=new StyledDialog.Builder(getActivity());
  setCancelable(true);
  builder.setMessage(getArguments().getString("dialogMessage"));
  builder.setMultiChoiceItems(items,checked,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int indexSelected){
switch (indexSelected) {
case INCLUDE_SCHED:
        mIncludeSched=!mIncludeSched;
      break;
case INCLUDE_MEDIA:
    mIncludeMedia=!mIncludeMedia;
  break;
}
}
}
,(OnCheckedChangeListener)null);
builder.setPositiveButton(res.getString(R.string.dialog_ok),new DialogInterface.OnClickListener(){
@Override public void onClick(DialogInterface dialog,int which){
((ExportDialogListener)getActivity()).exportApkg(null,did != -1L ? did : null,mIncludeSched,mIncludeMedia);
dismissAllDialogFragments();
}
}
);
builder.setNegativeButton(res.getString(R.string.dialog_cancel),null);
return builder.create();
}
