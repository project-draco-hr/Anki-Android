{
  Log.i(AnkiDroidApp.TAG,"prepareSync = " + String.format(ENGLISH_LOCALE,"%f",mDeck.getLastSync()));
  mLocalTime=mDeck.getModified();
  mRemoteTime=mServer.modified();
  Log.i(AnkiDroidApp.TAG,"localTime = " + mLocalTime);
  Log.i(AnkiDroidApp.TAG,"remoteTime = " + mRemoteTime);
  if (mLocalTime == mRemoteTime) {
    return false;
  }
  double l=mDeck.getLastSync();
  Log.i(AnkiDroidApp.TAG,"lastSync local = " + String.format(ENGLISH_LOCALE,"%f",l));
  double r=mServer.lastSync();
  Log.i(AnkiDroidApp.TAG,"lastSync remote = " + String.format(ENGLISH_LOCALE,"%f",r));
  if (l != r) {
    mDeck.setLastSync(java.lang.Math.min(l,r) - 600);
    Log.i(AnkiDroidApp.TAG,"deck.lastSync = min(l,r) - 600");
  }
 else {
    mDeck.setLastSync(l);
  }
  Log.i(AnkiDroidApp.TAG,"deck.lastSync = " + mDeck.getLastSync());
  return true;
}
