{
  mReviewer=new WeakReference<Context>(context);
  mTts=new TextToSpeech(context,new TextToSpeech.OnInitListener(){
    @Override public void onInit(    int status){
      if (status == TextToSpeech.SUCCESS) {
        int result=mTts.setLanguage(Locale.US);
        if (result == TextToSpeech.LANG_MISSING_DATA || result == TextToSpeech.LANG_NOT_SUPPORTED) {
        }
 else {
          mTts.stop();
          ((AbstractFlashcardViewer)mReviewer.get()).ttsInitialized();
          Log.i(AnkiDroidApp.TAG,"TTS initialized and set to US");
        }
      }
 else {
        Toast.makeText(mReviewer.get(),mReviewer.get().getString(R.string.no_tts_available_message),Toast.LENGTH_LONG).show();
      }
      AnkiDroidApp.getCompat().setTtsOnUtteranceProgressListener(mTts);
    }
  }
);
  mTtsParams=new HashMap<String,String>();
  mTtsParams.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID,"stringId");
  Toast.makeText(context,context.getString(R.string.initializing_tts),Toast.LENGTH_LONG).show();
}
