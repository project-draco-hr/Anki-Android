{
  if (did == 0) {
    did=mCol.getDecks().selected();
  }
  JSONObject deck=mCol.getDecks().get(did);
  try {
    if (deck.getInt("dyn") == 0) {
      Log.e(AnkiDroidApp.TAG,"error: deck is not a dynamic deck");
      return;
    }
  }
 catch (  JSONException e1) {
    throw new RuntimeException(e1);
  }
  remDyn(did);
  String order=_dynOrder(deck);
  String limit;
  ArrayList<Long> ids;
  String search;
  try {
    limit=" LIMIT " + deck.getInt("limit");
    search=deck.getInt("search") + " -is:suspended";
  }
 catch (  JSONException e) {
    throw new RuntimeException(e);
  }
  try {
    ids=mCol.findCards(search,order + limit);
  }
 catch (  RuntimeException e) {
    ids=new ArrayList<Long>();
  }
  _moveToDyn(did,ids);
  mCol.getDecks().select(did);
}
