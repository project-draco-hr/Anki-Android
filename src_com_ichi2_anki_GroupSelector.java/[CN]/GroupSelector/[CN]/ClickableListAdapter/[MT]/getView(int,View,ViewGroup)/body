{
  View view=super.getView(position,convertView,parent);
  TextView name=(TextView)view.findViewById(R.id.group_item_name);
  name.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      String name=mGroups.get(position).get("fullname");
      if (mGroupStatus.get(name)[STATUS_OPENED]) {
        mGroupStatus.get(name)[STATUS_OPENED]=false;
        int pos=position + 1;
        while (pos < mGroups.size() && mGroups.get(pos).get("fullname").startsWith(name + "::")) {
          mGroupStatus.get(mGroups.get(pos).get("fullname"))[STATUS_VISIBLE]=false;
          pos++;
        }
      }
 else       if (mGroupStatus.get(name)[STATUS_HAS_CHILDREN]) {
        mGroupStatus.get(name)[STATUS_OPENED]=true;
        changeChildrenStatus(name,STATUS_VISIBLE,true);
        changeChildrenStatus(name,STATUS_OPENED,true);
      }
      updateList();
    }
  }
);
  CheckBox box=(CheckBox)view.findViewById(R.id.group_item_check);
  box.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      String name=mGroups.get(position).get("fullname");
      boolean newState=!mGroupStatus.get(name)[STATUS_CHECKED];
      mGroupStatus.get(name)[STATUS_CHECKED]=newState;
      if (mGroupStatus.get(name)[1]) {
        changeChildrenStatus(name,STATUS_CHECKED,newState);
      }
      updateList();
    }
  }
);
  return view;
}
