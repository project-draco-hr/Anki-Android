{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.group_selector);
  mDeck=AnkiDroidApp.deck();
  restorePreferences();
  mGroups=new ArrayList<HashMap<String,String>>();
  mAllGroups=new ArrayList<HashMap<String,String>>();
  mGroupStatus=new HashMap<String,Boolean[]>();
  mGroupListView=(ListView)findViewById(R.id.group_list);
  mGroupsAdapter=new ClickableListAdapter(this,mGroups,R.layout.group_item,new String[]{"fullname","name","conf","all","due","new"},new int[]{R.id.group_item_check,R.id.group_item_name,R.id.group_item_conf,R.id.group_item_all,R.id.group_item_due,R.id.group_item_new});
  mGroupsAdapter.setViewBinder(new SimpleAdapter.ViewBinder(){
    @Override public boolean setViewValue(    View view,    Object arg1,    String text){
      if (view.getId() == R.id.group_item_check) {
        ((CheckBox)view).setChecked(mGroupStatus.get(text)[STATUS_CHECKED]);
        return true;
      }
      return false;
    }
  }
);
  mGroupListView.setOnItemClickListener(new OnItemClickListener(){
    @Override public void onItemClick(    AdapterView<?> parent,    View view,    int position,    long id){
    }
  }
);
  mGroupListView.setAdapter(mGroupsAdapter);
  registerForContextMenu(mGroupListView);
  gestureDetector=new GestureDetector(new MyGestureDetector());
  mGroupListView.setOnTouchListener(new View.OnTouchListener(){
    public boolean onTouch(    View v,    MotionEvent event){
      if (gestureDetector.onTouchEvent(event)) {
        return true;
      }
      return false;
    }
  }
);
  mSessionTimeLimit=(EditText)findViewById(R.id.session_minutes);
  mSessionRepLimit=(EditText)findViewById(R.id.session_questions);
  mSessionTimeLimit.setText(mDeck.getStringVar("sessionTimeLimit"));
  mSessionRepLimit.setText(mDeck.getStringVar("sessionRepLimit"));
  prepareDialogs();
  getGroups();
}
