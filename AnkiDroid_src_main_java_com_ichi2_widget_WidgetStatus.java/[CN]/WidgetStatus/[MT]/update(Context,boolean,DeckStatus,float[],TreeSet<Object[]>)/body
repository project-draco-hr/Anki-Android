{
  sDeckStatus=deckStatus;
  sSmallWidgetStatus=smallWidgetStatus;
  sDeckCounts=deckCounts;
  SharedPreferences preferences=AnkiDroidApp.getSharedPrefs(context);
  mediumWidget=preferences.getBoolean("widgetMediumEnabled",false);
  smallWidget=preferences.getBoolean("widgetSmallEnabled",false);
  bigWidget=updateBigWidget && preferences.getBoolean("widgetBigEnabled",false);
  notification=Integer.parseInt(preferences.getString("minimumCardsDueForNotification","1000001")) < 1000000 && sDeckStatus == null;
  if ((mediumWidget || smallWidget || bigWidget|| notification) && ((sUpdateDeckStatusAsyncTask == null) || (sUpdateDeckStatusAsyncTask.getStatus() == AsyncTask.Status.FINISHED))) {
    Timber.d("WidgetStatus.update(): updating");
    sUpdateDeckStatusAsyncTask=new UpdateDeckStatusAsyncTask();
    sUpdateDeckStatusAsyncTask.execute(context);
  }
 else {
    Timber.d("WidgetStatus.update(): already running or not enabled");
  }
}
