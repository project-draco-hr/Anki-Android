{
  String deckFilename=null;
  mLock.lock();
  try {
    while (!mFinished)     mCondFinished.await();
    HashMap<String,String> data=(HashMap<String,String>)mDeckListAdapter.getItem(id);
    deckFilename=data.get("filepath");
  }
 catch (  InterruptedException e) {
    e.printStackTrace();
  }
 finally {
    mLock.unlock();
  }
  if (deckFilename != null) {
    Log.i("anki","Selected " + deckFilename);
    Intent intent=this.getIntent();
    intent.putExtra(Ankidroid.OPT_DB,deckFilename);
    setResult(RESULT_OK,intent);
    finish();
  }
}
