{
  StyledDialog.Builder builder=new StyledDialog.Builder(DeckPicker.this);
  builder.setTitle("Deck Upgrade");
  builder.setIcon(R.drawable.ic_dialog_alert);
  builder.setMessage("Be aware that this will rename your collection to \'collection.old\' and will create a new one from your old anki 1.x files. Do you really want to continue?");
  builder.setPositiveButton("yes",new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      String path=AnkiDroidApp.getCollectionPath();
      int i=0;
      String newPath=path.replace("collection.anki2","collection.old" + i);
      while ((new File(newPath)).exists()) {
        i++;
        newPath=path.replace("collection.anki2","collection.old" + i);
      }
      (new File(path)).renameTo(new File(newPath));
      showUpgradeScreen(true,Info.UPGRADE_SCREEN_BASIC1);
      AnkiDroidApp.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).edit().putString("lastUpgradeVersion",AnkiDroidApp.getPkgVersion()).commit();
    }
  }
);
  builder.setCancelable(false);
  builder.setNegativeButton("no",new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      AnkiDroidApp.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).edit().putString("lastUpgradeVersion",AnkiDroidApp.getPkgVersion()).commit();
    }
  }
);
  builder.show();
}
