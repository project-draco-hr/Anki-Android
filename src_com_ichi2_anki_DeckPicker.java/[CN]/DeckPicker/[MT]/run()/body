{
  Log.i(AnkiDroidApp.TAG,"Thread run - Beginning");
  if (mFileList != null && mFileList.length > 0) {
    mLock.lock();
    try {
      Log.i(AnkiDroidApp.TAG,"Thread run - Inside lock");
      mIsFinished=false;
      for (      File file : mFileList) {
        Log.i(AnkiDroidApp.TAG,"Thread run - Before break mDeckIsSelected = " + mDeckIsSelected);
        if (mDeckIsSelected) {
          break;
        }
        String path=file.getAbsolutePath();
        Deck deck;
        try {
          deck=Deck.openDeck(path);
        }
 catch (        SQLException e) {
          Log.w(AnkiDroidApp.TAG,"Could not open database " + path);
          continue;
        }
        int dueCards=deck.getFailedSoonCount() + deck.getRevCount();
        int totalCards=deck.getCardCount();
        int newCards=deck.getNewCountToday();
        deck.closeDeck();
        Bundle data=new Bundle();
        data.putString("absPath",path);
        data.putInt("due",dueCards);
        data.putInt("total",totalCards);
        data.putInt("new",newCards);
        Message msg=Message.obtain();
        msg.setData(data);
        mHandler.sendMessage(msg);
      }
      mIsFinished=true;
      mCondFinished.signal();
    }
  finally {
      mLock.unlock();
    }
  }
}
