{
  Map<Long,String> modelList=getModelList(numFields);
  ArrayList<Long> foundModels=new ArrayList<>();
  for (  Map.Entry<Long,String> entry : modelList.entrySet()) {
    if (entry.getValue().equals(modelName)) {
      foundModels.add(entry.getKey());
    }
  }
  SharedPreferences modelsDb=context.getSharedPreferences(MODEL_REF_DB,Context.MODE_PRIVATE);
  Long mid=modelsDb.getLong(modelName,-1);
  if (mid == -1 && foundModels.size() == 0) {
    return null;
  }
 else   if (mid == -1 && foundModels.size() > 0) {
    return foundModels.get(0);
  }
 else {
    if (getModelName(mid) != null && getFieldList(mid).length >= numFields) {
      return mid;
    }
 else {
      return null;
    }
  }
}
