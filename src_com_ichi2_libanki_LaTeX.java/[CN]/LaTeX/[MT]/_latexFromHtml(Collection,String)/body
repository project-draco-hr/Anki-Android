{
  StringBuffer sb=new StringBuffer();
  latex=latex.replace("&nbsp;"," ");
  Matcher matcher=sEntityPattern.matcher(latex);
  while (matcher.find()) {
    matcher.appendReplacement(sb,Html.fromHtml(matcher.group(1)).toString());
  }
  matcher.appendTail(sb);
  latex=sb.toString().replaceAll("<br( /)?>","\n");
  latex=latex.replaceAll("<.+?>"," ");
  latex=Utils.stripHTML(latex);
  return latex;
}
