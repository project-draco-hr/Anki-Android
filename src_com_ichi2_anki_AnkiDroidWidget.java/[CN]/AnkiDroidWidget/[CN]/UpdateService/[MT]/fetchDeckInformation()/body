{
  Log.i(AnkiDroidApp.TAG,"fetchDeckInformation");
  SharedPreferences preferences=PrefSettings.getSharedPrefs(getBaseContext());
  String deckPath=preferences.getString("deckPath","/sdcard");
  File dir=new File(deckPath);
  if (dir == null) {
    return new ArrayList<DeckInformation>();
  }
  File[] fileList=dir.listFiles(new AnkiFileFilter());
  if (fileList == null || fileList.length == 0) {
    return new ArrayList<DeckInformation>();
  }
  ArrayList<DeckInformation> information=new ArrayList<DeckInformation>(fileList.length);
  for (  File file : fileList) {
    try {
      String absPath=file.getAbsolutePath();
      String deckName=file.getName().replaceAll(".anki","");
      Deck deck=Deck.openDeck(absPath);
      int dueCards=deck.getDueCount();
      int newCards=deck.getNewCountToday();
      int failedCards=deck.getFailedSoonCount();
      deck.closeDeck();
      information.add(new DeckInformation(deckName,newCards,dueCards,failedCards));
    }
 catch (    Exception e) {
      Log.i(AnkiDroidApp.TAG,"Could not open deck");
      Log.e(AnkiDroidApp.TAG,e.toString());
    }
  }
  if (!information.isEmpty() && information.size() > 1) {
    Log.i(AnkiDroidApp.TAG,"Sorting deck");
    Collections.sort(information,new ByDueComparator());
    Collections.reverse(information);
  }
  return information;
}
