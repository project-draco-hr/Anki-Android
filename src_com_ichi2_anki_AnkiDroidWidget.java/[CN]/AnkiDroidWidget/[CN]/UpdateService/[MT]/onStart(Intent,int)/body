{
  Log.i(AnkiDroidApp.TAG,"OnStart");
  boolean updateDueDecksNow=true;
  if (intent != null) {
    if (ACTION_NEXT.equals(intent.getAction())) {
      currentDueDeck++;
      updateDueDecksNow=false;
    }
 else     if (ACTION_PREV.equals(intent.getAction())) {
      currentDueDeck--;
      updateDueDecksNow=false;
    }
 else     if (ACTION_IGNORE.equals(intent.getAction())) {
      updateDueDecksNow=false;
    }
 else     if (ACTION_OPEN.equals(intent.getAction())) {
      if (currentDueDeck >= 0 && currentDueDeck < dueDecks.size()) {
        Intent openDeckIntent=new Intent(this,StudyOptions.class);
        openDeckIntent.setAction(Intent.ACTION_MAIN);
        openDeckIntent.addCategory(Intent.CATEGORY_LAUNCHER);
        openDeckIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(openDeckIntent);
      }
      updateDueDecksNow=false;
    }
 else     if (ACTION_UPDATE.equals(intent.getAction())) {
      Log.d(AnkiDroidApp.TAG,"AnkiDroidWidget.UpdateService: UPDATE");
    }
  }
  RemoteViews updateViews=buildUpdate(this,updateDueDecksNow);
  ComponentName thisWidget=new ComponentName(this,AnkiDroidWidget.class);
  AppWidgetManager manager=AppWidgetManager.getInstance(this);
  manager.updateAppWidget(thisWidget,updateViews);
}
