{
  AlertDialog.Builder builder=new AlertDialog.Builder(this);
  LayoutInflater layoutInflater=LayoutInflater.from(this);
  View view=layoutInflater.inflate(R.layout.action_view_spinner,null);
  builder.setIcon(android.R.drawable.ic_input_get);
  builder.setView(view);
  builder.setTitle(getResources().getString(R.string.stats_select_time_scale));
  mTimeSpinner=(Spinner)((RelativeLayout)view).getChildAt(0);
  ArrayAdapter<String> timeFrameAdapter=new ArrayAdapter<String>(this,R.layout.drawer_list_item,R.id.drawer_list_item_text,getResources().getStringArray(R.array.stats_period));
  mTimeSpinner.setAdapter(timeFrameAdapter);
  mTimeSpinner.setSelection(mTaskHandler.getStatType(),false);
  final int currentStatType=mSelectedStatType;
  mTimeSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener(){
    @Override public void onItemSelected(    AdapterView<?> parentView,    View selectedItemView,    int position,    long id){
switch (position) {
case Stats.TYPE_MONTH:
        mSelectedStatType=Stats.TYPE_MONTH;
      break;
case Stats.TYPE_YEAR:
    mSelectedStatType=Stats.TYPE_YEAR;
  break;
case Stats.TYPE_LIFE:
mSelectedStatType=Stats.TYPE_LIFE;
}
}
@Override public void onNothingSelected(AdapterView<?> parentView){
}
}
);
builder.setPositiveButton(getResources().getString(R.string.dialog_ok),new DialogInterface.OnClickListener(){
public void onClick(DialogInterface dialog,int id){
if (mTaskHandler.getStatType() != mSelectedStatType) {
mTaskHandler.setStatType(mSelectedStatType);
mSectionsPagerAdapter.notifyDataSetChanged();
}
mSectionsPagerAdapter.notifyDataSetChanged();
}
}
);
builder.setNegativeButton(getResources().getString(R.string.dialog_cancel),new DialogInterface.OnClickListener(){
public void onClick(DialogInterface dialog,int id){
mSelectedStatType=currentStatType;
dialog.cancel();
dialog.dismiss();
}
}
);
AlertDialog alert=builder.create();
alert.show();
}
