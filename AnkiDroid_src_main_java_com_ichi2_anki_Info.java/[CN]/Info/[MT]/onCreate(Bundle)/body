{
  Timber.d("onCreate()");
  Themes.applyTheme(this);
  super.onCreate(savedInstanceState);
  Resources res=getResources();
  WebView webView;
  mType=getIntent().getIntExtra(TYPE_EXTRA,TYPE_ABOUT);
  setTitle(String.format("%s v%s",AnkiDroidApp.getAppName(),AnkiDroidApp.getPkgVersionName()));
  setContentView(R.layout.info);
  webView=(WebView)findViewById(R.id.info);
  webView.setBackgroundColor(res.getColor(Themes.getBackgroundColor()));
  Themes.setWallpaper((View)webView.getParent().getParent().getParent());
  TextView termsAndConditionsView=(TextView)findViewById(R.id.info_terms_and_conditions);
  termsAndConditionsView.setMovementMethod(LinkMovementMethod.getInstance());
  Button continueButton=(Button)findViewById(R.id.info_continue);
  continueButton.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View arg0){
      if (mType == TYPE_ABOUT) {
        if (CompatHelper.isKindle()) {
          Intent intent=new Intent("android.intent.action.VIEW",Uri.parse("http://www.amazon.com/gp/mas/dl/android?p=com.ichi2.anki"));
          startActivity(intent);
        }
 else {
          Info.this.startActivity(new Intent(Intent.ACTION_VIEW,Uri.parse("market://details?id=com.ichi2.anki")));
        }
        return;
      }
      setResult(RESULT_OK);
switch (mType) {
case TYPE_NEW_VERSION:
        AnkiDroidApp.getSharedPrefs(Info.this.getBaseContext()).edit().putString("lastVersion",AnkiDroidApp.getPkgVersionName()).commit();
      break;
  }
  finishWithAnimation();
}
}
);
StringBuilder sb=new StringBuilder();
switch (mType) {
case TYPE_ABOUT:
String[] content=res.getStringArray(R.array.about_content);
sb.append("<html><body text=\"#000000\" link=\"#E37068\" alink=\"#E37068\" vlink=\"#E37068\">");
sb.append(String.format(content[0],res.getString(R.string.app_name),res.getString(R.string.link_anki))).append("<br/><br/>");
sb.append(String.format(content[1],res.getString(R.string.link_issue_tracker),res.getString(R.string.link_wiki),res.getString(R.string.link_forum))).append("<br/><br/>");
sb.append(String.format(content[2],res.getString(R.string.link_wikipedia_open_source),res.getString(R.string.link_contribution),res.getString(R.string.link_contribution_contributors))).append(" ");
sb.append(String.format(content[3],res.getString(R.string.link_translation),res.getString(R.string.link_donation))).append("<br/><br/>");
sb.append(String.format(content[4],res.getString(R.string.licence_wiki),res.getString(R.string.link_source))).append("<br/><br/>");
sb.append("</body></html>");
webView.loadDataWithBaseURL("",sb.toString(),"text/html","utf-8",null);
((Button)findViewById(R.id.info_continue)).setText(res.getString(R.string.info_rate));
Button debugCopy=((Button)findViewById(R.id.info_later));
debugCopy.setText(res.getString(R.string.feedback_copy_debug));
debugCopy.setVisibility(View.VISIBLE);
debugCopy.setOnClickListener(new OnClickListener(){
@Override public void onClick(View v){
copyDebugInfo();
}
}
);
break;
case TYPE_NEW_VERSION:
webView.loadUrl(res.getString(R.string.changelog_url));
break;
default :
finish();
break;
}
}
