{
  StyledDialog.Builder builder=new StyledDialog.Builder(context);
  builder.setTitle(context.getString(R.string.statistics_type_title));
  builder.setIcon(android.R.drawable.ic_menu_sort_by_size);
  String[] items=new String[3];
  items[0]=context.getResources().getString(R.string.stats_forecast);
  items[1]=context.getResources().getString(R.string.stats_review_count);
  items[2]=context.getResources().getString(R.string.stats_review_time);
  builder.setItems(items,listener);
  final RadioButton[] statisticRadioButtons=new RadioButton[3];
  RadioGroup rg=new RadioGroup(context);
  rg.setOrientation(RadioGroup.HORIZONTAL);
  RadioGroup.LayoutParams lp=new RadioGroup.LayoutParams(0,LayoutParams.MATCH_PARENT,1);
  String[] text=new String[]{"1 month","1 year","all"};
  int height=context.getResources().getDrawable(R.drawable.white_btn_radio).getIntrinsicHeight();
  for (int i=0; i < statisticRadioButtons.length; i++) {
    statisticRadioButtons[i]=new RadioButton(context);
    statisticRadioButtons[i].setClickable(true);
    statisticRadioButtons[i].setText("         " + text[i]);
    statisticRadioButtons[i].setHeight(height * 2);
    statisticRadioButtons[i].setSingleLine();
    statisticRadioButtons[i].setBackgroundDrawable(null);
    statisticRadioButtons[i].setGravity(Gravity.CENTER_VERTICAL);
    rg.addView(statisticRadioButtons[i],lp);
  }
  rg.setOnCheckedChangeListener(new OnCheckedChangeListener(){
    @Override public void onCheckedChanged(    RadioGroup arg0,    int arg1){
      int checked=arg0.getCheckedRadioButtonId();
      for (int i=0; i < 3; i++) {
        if (arg0.getChildAt(i).getId() == checked) {
          PrefSettings.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).edit().putInt("statsType",i).commit();
          break;
        }
      }
    }
  }
);
  rg.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,height));
  statisticRadioButtons[Math.min(PrefSettings.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).getInt("statsType",Stats.TYPE_MONTH),Stats.TYPE_LIFE)].setChecked(true);
  if (showWholeDeckSelection) {
    final RadioButton[] statisticRadioButtons2=new RadioButton[2];
    RadioGroup rg2=new RadioGroup(context);
    rg2.setOrientation(RadioGroup.HORIZONTAL);
    String[] text2=new String[]{"collection","current deck"};
    for (int i=0; i < statisticRadioButtons2.length; i++) {
      statisticRadioButtons2[i]=new RadioButton(context);
      statisticRadioButtons2[i].setClickable(true);
      statisticRadioButtons2[i].setText("         " + text2[i]);
      statisticRadioButtons2[i].setHeight(height * 2);
      statisticRadioButtons2[i].setSingleLine();
      statisticRadioButtons2[i].setBackgroundDrawable(null);
      statisticRadioButtons2[i].setGravity(Gravity.CENTER_VERTICAL);
      rg2.addView(statisticRadioButtons2[i],lp);
    }
    rg2.setOnCheckedChangeListener(new OnCheckedChangeListener(){
      @Override public void onCheckedChanged(      RadioGroup arg0,      int arg1){
        PrefSettings.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).edit().putBoolean("statsRange",arg0.getCheckedRadioButtonId() == 0).commit();
      }
    }
);
    rg2.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,height));
    statisticRadioButtons2[PrefSettings.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).getBoolean("statsRange",true) ? 0 : 1].setChecked(true);
    LinearLayout ll=new LinearLayout(context);
    ll.setOrientation(LinearLayout.VERTICAL);
    ll.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
    ll.addView(rg);
    ll.addView(rg2);
    builder.setView(ll,false,true);
  }
 else {
    builder.setView(rg,false,true);
  }
  return builder.create();
}
