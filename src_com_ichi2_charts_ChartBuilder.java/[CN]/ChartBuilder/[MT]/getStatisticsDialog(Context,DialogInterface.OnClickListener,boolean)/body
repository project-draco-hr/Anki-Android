{
  StyledDialog.Builder builder=new StyledDialog.Builder(context);
  builder.setTitle(context.getString(R.string.statistics_type_title));
  builder.setIcon(android.R.drawable.ic_menu_sort_by_size);
  String[] items=new String[3];
  items[0]=context.getResources().getString(R.string.stats_forecast);
  items[1]=context.getResources().getString(R.string.stats_review_count);
  items[2]=context.getResources().getString(R.string.stats_review_time);
  builder.setItems(items,listener);
  final RadioButton[] statisticRadioButtons=new RadioButton[3];
  RadioGroup rg=new RadioGroup(context);
  rg.setOrientation(RadioGroup.HORIZONTAL);
  RadioGroup.LayoutParams lp=new RadioGroup.LayoutParams(0,LayoutParams.MATCH_PARENT,1);
  Resources res=context.getResources();
  String[] text=res.getStringArray(R.array.stats_period);
  int height=context.getResources().getDrawable(R.drawable.white_btn_radio).getIntrinsicHeight();
  String spaces="";
  if (android.os.Build.VERSION.SDK_INT <= android.os.Build.VERSION_CODES.JELLY_BEAN) {
    spaces="         ";
  }
  for (int i=0; i < statisticRadioButtons.length; i++) {
    statisticRadioButtons[i]=new RadioButton(context);
    statisticRadioButtons[i].setClickable(true);
    statisticRadioButtons[i].setText(spaces + text[i]);
    statisticRadioButtons[i].setHeight(height * 2);
    statisticRadioButtons[i].setSingleLine();
    statisticRadioButtons[i].setBackgroundDrawable(null);
    statisticRadioButtons[i].setGravity(Gravity.CENTER_VERTICAL);
    rg.addView(statisticRadioButtons[i],lp);
  }
  rg.setOnCheckedChangeListener(new OnCheckedChangeListener(){
    @Override public void onCheckedChanged(    RadioGroup arg0,    int arg1){
      int checked=arg0.getCheckedRadioButtonId();
      for (int i=0; i < 3; i++) {
        if (arg0.getChildAt(i).getId() == checked) {
          AnkiDroidApp.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).edit().putInt("statsType",i).commit();
          break;
        }
      }
    }
  }
);
  rg.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,height));
  statisticRadioButtons[Math.min(AnkiDroidApp.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).getInt("statsType",Stats.TYPE_MONTH),Stats.TYPE_LIFE)].setChecked(true);
  final RadioButton[] statisticRadioButtons2=new RadioButton[2];
  RadioGroup rg2=new RadioGroup(context);
  rg2.setOrientation(RadioGroup.HORIZONTAL);
  String[] text2=res.getStringArray(R.array.stats_range);
  for (int i=0; i < statisticRadioButtons2.length; i++) {
    statisticRadioButtons2[i]=new RadioButton(context);
    statisticRadioButtons2[i].setClickable(true);
    statisticRadioButtons2[i].setText("         " + text2[i]);
    statisticRadioButtons2[i].setHeight(height * 2);
    statisticRadioButtons2[i].setSingleLine();
    statisticRadioButtons2[i].setBackgroundDrawable(null);
    statisticRadioButtons2[i].setGravity(Gravity.CENTER_VERTICAL);
    rg2.addView(statisticRadioButtons2[i],lp);
  }
  rg2.setOnCheckedChangeListener(new OnCheckedChangeListener(){
    @Override public void onCheckedChanged(    RadioGroup arg0,    int arg1){
      AnkiDroidApp.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).edit().putBoolean("statsRange",arg0.getCheckedRadioButtonId() == arg0.getChildAt(0).getId()).commit();
    }
  }
);
  rg2.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,height));
  statisticRadioButtons2[AnkiDroidApp.getSharedPrefs(AnkiDroidApp.getInstance().getBaseContext()).getBoolean("statsRange",true) ? 0 : 1].setChecked(true);
  if (setWholeDeckSelection) {
    rg2.check(rg2.getChildAt(0).getId());
  }
 else {
    rg2.check(rg2.getChildAt(1).getId());
  }
  LinearLayout ll=new LinearLayout(context);
  ll.setOrientation(LinearLayout.VERTICAL);
  ll.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
  ll.addView(rg);
  ll.addView(rg2);
  builder.setView(ll,false,true);
  return builder.create();
}
