{
  if (!hooks.containsKey(hook) || hooks.get(hook) == null) {
    hooks.put(hook,new ArrayList<Hook>());
  }
  boolean found=false;
  for (  Hook h : hooks.get(hook)) {
    if (func.isInstance(h)) {
      found=true;
      break;
    }
  }
  if (!found) {
    try {
      hooks.get(hook).add(func.newInstance());
    }
 catch (    InstantiationException e) {
      throw new RuntimeException(e);
    }
catch (    IllegalAccessException e) {
      throw new RuntimeException(e);
    }
  }
}
