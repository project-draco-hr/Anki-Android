{
  Log.i(AnkiDroidApp.TAG,"doInBackgroundAddNote");
  Note note=params[0].getNote();
  Collection col=note.getCol();
  try {
    AnkiDb ankiDB=col.getDb();
    ankiDB.getDatabase().beginTransaction();
    try {
      publishProgress(new TaskData(col.addNote(note)));
      ankiDB.getDatabase().setTransactionSuccessful();
    }
  finally {
      ankiDB.getDatabase().endTransaction();
    }
  }
 catch (  RuntimeException e) {
    Log.e(AnkiDroidApp.TAG,"doInBackgroundAddNote - RuntimeException on adding fact: " + e);
    AnkiDroidApp.saveExceptionReportFile(e,"doInBackgroundAddNote");
    return new TaskData(false);
  }
  return new TaskData(true);
}
