{
  StyledDialog dialog=null;
  Resources res=getResources();
  StyledDialog.Builder builder=new StyledDialog.Builder(this);
switch (id) {
case DIALOG_ORDER:
    builder.setTitle(res.getString(R.string.card_browser_change_display_order_title));
  builder.setIcon(android.R.drawable.ic_menu_sort_by_size);
builder.setSingleChoiceItems(getResources().getStringArray(R.array.card_browser_order_labels),mSelectedOrder,new DialogInterface.OnClickListener(){
  @Override public void onClick(  DialogInterface arg0,  int which){
    if (which != mSelectedOrder) {
      mSelectedOrder=which;
      DeckTask.launchDeckTask(DeckTask.TASK_TYPE_SORT_CARDS,mSortCardsHandler,new DeckTask.TaskData(mAllCards,new HashMapCompare()));
    }
  }
}
);
dialog=builder.create();
break;
case DIALOG_CONTEXT_MENU:
String[] entries=new String[4];
@SuppressWarnings("unused") MenuItem item;
entries[CONTEXT_MENU_MARK]=res.getString(R.string.card_browser_mark_card);
entries[CONTEXT_MENU_SUSPEND]=res.getString(R.string.card_browser_suspend_card);
entries[CONTEXT_MENU_DELETE]=res.getString(R.string.card_browser_delete_card);
entries[CONTEXT_MENU_DETAILS]=res.getString(R.string.card_browser_card_details);
builder.setTitle("contextmenu");
builder.setIcon(R.drawable.ic_menu_manage);
builder.setItems(entries,mContextMenuListener);
dialog=builder.create();
break;
case DIALOG_RELOAD_CARDS:
builder.setTitle(res.getString(R.string.pref_cache_cardbrowser));
builder.setMessage(res.getString(R.string.pref_cache_cardbrowser_reload));
builder.setPositiveButton(res.getString(R.string.yes),new OnClickListener(){
@Override public void onClick(DialogInterface arg0,int arg1){
DeckTask.launchDeckTask(DeckTask.TASK_TYPE_LOAD_CARDS,mLoadCardsHandler,new DeckTask.TaskData(mDeck,LOAD_CHUNK));
}
}
);
builder.setNegativeButton(res.getString(R.string.no),new OnClickListener(){
@Override public void onClick(DialogInterface arg0,int arg1){
mAllCards.addAll(sAllCardsCache);
mCards.addAll(mAllCards);
updateList();
}
}
);
builder.setCancelable(true);
builder.setOnCancelListener(new OnCancelListener(){
@Override public void onCancel(DialogInterface arg0){
mAllCards.addAll(sAllCardsCache);
mCards.addAll(mAllCards);
updateList();
}
}
);
dialog=builder.create();
break;
}
return dialog;
}
