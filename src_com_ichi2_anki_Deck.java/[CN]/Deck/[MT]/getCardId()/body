{
  long id;
  if ((mDelay0 != 0) && (mFailedNowCount != 0)) {
    return AnkiDatabaseManager.getDatabase(mDeckPath).queryScalar("SELECT id FROM failedCards LIMIT 1");
  }
  if ((mFailedCardMax != 0) && (mFailedSoonCount >= mFailedCardMax)) {
    return AnkiDatabaseManager.getDatabase(mDeckPath).queryScalar("SELECT id FROM failedCards LIMIT 1");
  }
  if (timeForNewCard()) {
    id=maybeGetNewCard();
    if (id != 0) {
      return id;
    }
  }
  if (mRevCount != 0) {
    return getRevCard();
  }
  id=maybeGetNewCard();
  if (id != 0) {
    return id;
  }
  if (mReviewEarly) {
    id=getCardIdAhead();
    if (id != 0) {
      return id;
    }
 else {
      resetAfterReviewEarly();
      checkDue();
    }
  }
  if (showFailedLast()) {
    try {
      id=AnkiDatabaseManager.getDatabase(mDeckPath).queryScalar("SELECT id FROM failedCards LIMIT 1");
    }
 catch (    Exception e) {
      return 0;
    }
    return id;
  }
  return 0;
}
