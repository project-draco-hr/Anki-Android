{
  Cursor cursor=null;
  boolean value=false;
  boolean dbAlreadyOpened=AnkiDatabaseManager.isDatabaseOpen(deckPath);
  try {
    cursor=AnkiDatabaseManager.getDatabase(deckPath).getDatabase().rawQuery("PRAGMA journal_mode",null);
    if (cursor.moveToFirst()) {
      value=cursor.getString(0).equalsIgnoreCase("wal");
    }
  }
  finally {
    if (cursor != null && !cursor.isClosed()) {
      cursor.close();
    }
  }
  if (!dbAlreadyOpened) {
    AnkiDatabaseManager.closeDatabase(deckPath);
  }
  return value;
}
