{
  Cursor cursor=null;
  long[] ids=null;
  try {
    cursor=AnkiDatabaseManager.getDatabase(mDeckPath).getDatabase().rawQuery("SELECT id " + "FROM cards " + "WHERE priority = -1",null);
    if (cursor.moveToFirst()) {
      int count=cursor.getCount();
      ids=new long[count];
      for (int i=0; i < count; i++) {
        ids[i]=cursor.getLong(0);
        cursor.moveToNext();
      }
    }
  }
  finally {
    if (cursor != null) {
      cursor.close();
    }
  }
  if (ids != null) {
    updatePriorities(ids);
    flushMod();
  }
  if (mReviewEarly || mNewEarly) {
    mReviewEarly=false;
    mNewEarly=false;
    checkDue();
  }
}
