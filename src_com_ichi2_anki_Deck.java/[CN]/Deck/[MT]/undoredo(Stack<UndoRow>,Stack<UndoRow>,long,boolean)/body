{
  UndoRow row;
  while (true) {
    row=src.pop();
    if (row != null) {
      break;
    }
  }
  if (inReview) {
    dst.push(new UndoRow(row.mName,row.mCardId));
  }
 else {
    dst.push(new UndoRow(row.mName,oldCardId));
  }
  mUndoReStackToRecord=mRedoStack;
  getDB().getDatabase().beginTransaction();
  try {
    for (    UndoCommand u : row.mUndoCommands) {
      getDB().execSQL(this,u.mCommand,u.mTable,u.mValues,u.mWhereClause);
    }
    getDB().getDatabase().setTransactionSuccessful();
  }
  finally {
    mUndoReStackToRecord=null;
    getDB().getDatabase().endTransaction();
  }
  if (row.mUndoCommands.size() == 0) {
    dst.pop();
  }
  mCurrentUndoRedoType=row.mName;
  return row.mCardId;
}
