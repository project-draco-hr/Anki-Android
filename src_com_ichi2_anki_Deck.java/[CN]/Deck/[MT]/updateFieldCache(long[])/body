{
  HashMap<Long,String> r=new HashMap<Long,String>();
  Cursor cur=null;
  try {
    cur=getDB().getDatabase().rawQuery("SELECT factId, group_concat(value, ' ') FROM fields " + "WHERE factId IN " + Utils.ids2str(fids) + " GROUP BY factId",null);
    while (cur.moveToNext()) {
      String values=cur.getString(1);
      values=values.replaceFirst("^ *","");
      r.put(cur.getLong(0),Utils.stripHTMLMedia(values));
    }
  }
  finally {
    if (cur != null && !cur.isClosed()) {
      cur.close();
    }
  }
  if (r.size() > 0) {
    getDB().getDatabase().beginTransaction();
    SQLiteStatement st=getDB().getDatabase().compileStatement("UPDATE facts SET spaceUntil=? WHERE id=?");
    for (    Entry<Long,String> entry : r.entrySet()) {
      st.bindString(1,entry.getValue());
      st.bindLong(2,entry.getKey().longValue());
      st.execute();
    }
    getDB().getDatabase().setTransactionSuccessful();
    getDB().getDatabase().endTransaction();
  }
}
