{
  HashMap<Long,String> r=new HashMap<Long,String>();
  Cursor cur=null;
  try {
    cur=getDB().database.rawQuery("SELECT factId, group_concat(value, ' ') FROM fields " + "WHERE factId IN " + Utils.ids2str(fids) + " GROUP BY factId",null);
    while (cur.moveToNext()) {
      String values=cur.getString(1);
      if (values.charAt(0) == ' ') {
        values=values.substring(1);
      }
      r.put(cur.getLong(0),Utils.stripHTMLMedia(values));
    }
  }
 catch (  SQLException e) {
    throw new RuntimeException(e);
  }
 finally {
    if (cur != null) {
      cur.close();
    }
  }
  if (r.size() > 0) {
    getDB().database.beginTransaction();
    SQLiteStatement st=getDB().database.compileStatement("UPDATE facts SET spaceUntil=? WHERE id=?");
    for (    Long fid : r.keySet()) {
      st.bindString(1,r.get(fid));
      st.bindLong(2,fid.longValue());
      st.execute();
    }
    getDB().database.setTransactionSuccessful();
    getDB().database.endTransaction();
  }
}
