{
  mGlobalStats=Stats.globalStats(this);
  mDailyStats=Stats.dailyStats(this);
  rebuildCounts();
  mFailedQueue.clear();
  mRevQueue.clear();
  mNewQueue.clear();
  mSpacedFacts.clear();
  if (mNewCardSpacing == NEW_CARDS_DISTRIBUTE) {
    if (mNewCountToday != 0) {
      mNewCardModulus=(mNewCountToday + mRevCount) / mNewCountToday;
      if (mRevCount != 0) {
        mNewCardModulus=Math.max(2,mNewCardModulus);
      }
    }
 else {
      mNewCardModulus=0;
    }
  }
 else {
    mNewCardModulus=0;
  }
  mNewSpacing=getFloat("newSpacing");
}
