{
  Log.i(AnkiDroidApp.TAG,"uncaughtException");
  collectInformation();
  Date currentDate=new Date();
  SimpleDateFormat df1=new SimpleDateFormat("EEE MMM dd HH:mm:ss ",Locale.US);
  SimpleDateFormat df2=new SimpleDateFormat(" yyyy",Locale.US);
  TimeZone tz=TimeZone.getDefault();
  StringBuilder reportInformation=new StringBuilder(10000);
  reportInformation.append(String.format("Report Generated: %s%s%s\nBegin Collected Information\n\n",df1.format(currentDate),tz.getID(),df2.format(currentDate)));
  for (  String key : information.keySet()) {
    String value=information.get(key);
    reportInformation.append(String.format("%s = %s\n",key,value));
  }
  reportInformation.append(String.format("End Collected Information\n\nBegin Stacktrace\n\n"));
  final Writer result=new StringWriter();
  final PrintWriter printWriter=new PrintWriter(result);
  e.printStackTrace(printWriter);
  reportInformation.append(String.format("%s\n",result.toString()));
  reportInformation.append(String.format("End Stacktrace\n\nBegin Inner exceptions\n\n"));
  Throwable cause=e.getCause();
  while (cause != null) {
    cause.printStackTrace(printWriter);
    reportInformation.append(String.format("%s\n",result.toString()));
    cause=cause.getCause();
  }
  reportInformation.append(String.format("End Inner exceptions"));
  printWriter.close();
  Log.i(AnkiDroidApp.TAG,"report infomation string created");
  saveReportToFile(reportInformation.toString());
  PreviousHandler.uncaughtException(t,e);
}
