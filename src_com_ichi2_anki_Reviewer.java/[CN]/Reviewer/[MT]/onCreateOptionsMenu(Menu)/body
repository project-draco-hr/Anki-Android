{
  MenuItem item;
  Resources res=getResources();
  if (mPrefWhiteboard) {
    if (mShowWhiteboard) {
      Utils.addMenuItemInActionBar(menu,Menu.NONE,MENU_WHITEBOARD,Menu.NONE,R.string.hide_whiteboard,R.drawable.ic_menu_compose);
    }
 else {
      Utils.addMenuItemInActionBar(menu,Menu.NONE,MENU_WHITEBOARD,Menu.NONE,R.string.show_whiteboard,R.drawable.ic_menu_compose);
    }
    Utils.addMenuItemInActionBar(menu,Menu.NONE,MENU_CLEAR_WHITEBOARD,Menu.NONE,R.string.clear_whiteboard,R.drawable.ic_menu_clear_playlist);
  }
  Utils.addMenuItem(menu,Menu.NONE,MENU_EDIT,Menu.NONE,R.string.menu_edit_card,R.drawable.ic_menu_edit);
  SubMenu removeDeckSubMenu=menu.addSubMenu(Menu.NONE,MENU_REMOVE,Menu.NONE,R.string.menu_remove_card);
  removeDeckSubMenu.setIcon(R.drawable.ic_menu_stop);
  removeDeckSubMenu.add(Menu.NONE,MENU_REMOVE_BURY,Menu.NONE,R.string.menu_bury_card);
  removeDeckSubMenu.add(Menu.NONE,MENU_REMOVE_SUSPEND,Menu.NONE,R.string.menu_suspend_card);
  removeDeckSubMenu.add(Menu.NONE,MENU_REMOVE_DELETE,Menu.NONE,R.string.card_browser_delete_card);
  if (mPrefTextSelection) {
    item=menu.add(Menu.NONE,MENU_SEARCH,Menu.NONE,res.getString(R.string.menu_select));
    item.setIcon(R.drawable.ic_menu_search);
  }
  item=menu.add(Menu.NONE,MENU_MARK,Menu.NONE,R.string.menu_mark_card);
  Utils.addMenuItemInActionBar(menu,Menu.NONE,MENU_UNDO,Menu.NONE,R.string.undo,R.drawable.ic_menu_revert);
  Utils.addMenuItemInActionBar(menu,Menu.NONE,MENU_REDO,Menu.NONE,R.string.redo,R.drawable.ic_menu_redo);
  return true;
}
