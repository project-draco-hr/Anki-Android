{
  Resources res=getResources();
  UIUtils.addMenuItemInActionBar(menu,Menu.NONE,MENU_MARK,Menu.NONE,R.string.menu_mark_card,R.drawable.ic_menu_mark);
  UIUtils.addMenuItemInActionBar(menu,Menu.NONE,MENU_UNDO,Menu.NONE,R.string.undo,R.drawable.ic_menu_revert_disabled);
  UIUtils.addMenuItem(menu,Menu.NONE,MENU_EDIT,Menu.NONE,R.string.menu_edit_card,R.drawable.ic_menu_edit);
  if (mPrefWhiteboard) {
    if (mShowWhiteboard) {
      UIUtils.addMenuItemInActionBar(menu,Menu.NONE,MENU_WHITEBOARD,Menu.NONE,R.string.hide_whiteboard,R.drawable.ic_menu_compose);
    }
 else {
      UIUtils.addMenuItemInActionBar(menu,Menu.NONE,MENU_WHITEBOARD,Menu.NONE,R.string.show_whiteboard,R.drawable.ic_menu_compose);
    }
    UIUtils.addMenuItemInActionBar(menu,Menu.NONE,MENU_CLEAR_WHITEBOARD,Menu.NONE,R.string.clear_whiteboard,R.drawable.ic_menu_clear_playlist);
  }
  SubMenu removeDeckSubMenu=menu.addSubMenu(Menu.NONE,MENU_REMOVE,Menu.NONE,R.string.menu_dismiss_note);
  removeDeckSubMenu.setIcon(R.drawable.ic_menu_stop);
  removeDeckSubMenu.add(Menu.NONE,MENU_REMOVE_BURY,Menu.NONE,R.string.menu_bury_note);
  removeDeckSubMenu.add(Menu.NONE,MENU_REMOVE_SUSPEND_CARD,Menu.NONE,R.string.menu_suspend_card);
  removeDeckSubMenu.add(Menu.NONE,MENU_REMOVE_SUSPEND_NOTE,Menu.NONE,R.string.menu_suspend_note);
  removeDeckSubMenu.add(Menu.NONE,MENU_REMOVE_DELETE,Menu.NONE,R.string.menu_delete_note);
  if (mPrefTextSelection) {
    MenuItem item=menu.add(Menu.NONE,MENU_SEARCH,Menu.NONE,res.getString(R.string.menu_select));
    item.setIcon(R.drawable.ic_menu_search);
    item.setEnabled(Lookup.isAvailable());
  }
  return true;
}
