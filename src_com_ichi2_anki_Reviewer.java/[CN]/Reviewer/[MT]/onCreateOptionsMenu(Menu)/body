{
  MenuItem item;
  Resources res=getResources();
  if (mPrefWhiteboard) {
    item=menu.add(Menu.NONE,MENU_WHITEBOARD,Menu.NONE,R.string.show_whiteboard);
    item.setIcon(R.drawable.ic_menu_compose);
    item=menu.add(Menu.NONE,MENU_CLEAR_WHITEBOARD,Menu.NONE,R.string.clear_whiteboard);
    item.setIcon(R.drawable.ic_menu_clear_playlist);
  }
  item=menu.add(Menu.NONE,MENU_EDIT,Menu.NONE,R.string.menu_edit_card);
  item.setIcon(R.drawable.ic_menu_edit);
  SubMenu removeDeckSubMenu=menu.addSubMenu(Menu.NONE,MENU_REMOVE,Menu.NONE,R.string.menu_remove_card);
  removeDeckSubMenu.setIcon(R.drawable.ic_menu_close_clear_cancel);
  removeDeckSubMenu.add(Menu.NONE,MENU_REMOVE_BURY,Menu.NONE,R.string.menu_bury_card);
  removeDeckSubMenu.add(Menu.NONE,MENU_REMOVE_SUSPEND,Menu.NONE,R.string.menu_suspend_card);
  removeDeckSubMenu.add(Menu.NONE,MENU_REMOVE_DELETE,Menu.NONE,R.string.card_browser_delete_card);
  if (mPrefTextSelection) {
    item=menu.add(Menu.NONE,MENU_SEARCH,Menu.NONE,String.format(getString(R.string.menu_search),res.getStringArray(R.array.dictionary_labels)[mDictionary]));
    item.setIcon(R.drawable.ic_menu_search);
  }
  item=menu.add(Menu.NONE,MENU_MARK,Menu.NONE,R.string.menu_mark_card);
  item=menu.add(Menu.NONE,MENU_UNDO,Menu.NONE,R.string.undo);
  item.setIcon(R.drawable.ic_menu_revert);
  item=menu.add(Menu.NONE,MENU_REDO,Menu.NONE,R.string.redo);
  item.setIcon(R.drawable.ic_menu_redo);
  return true;
}
