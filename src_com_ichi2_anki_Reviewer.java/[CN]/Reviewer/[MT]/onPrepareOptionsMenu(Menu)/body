{
  Resources res=getResources();
  MenuItem item=menu.findItem(MENU_MARK);
  if (mCurrentCard != null && mCurrentCard.note().hasTag("marked")) {
    item.setTitle(R.string.menu_unmark_card);
    item.setIcon(R.drawable.ic_menu_marked);
  }
 else {
    item.setTitle(R.string.menu_mark_card);
    item.setIcon(R.drawable.ic_menu_mark);
  }
  item=menu.findItem(MENU_UNDO);
  if (mSched.getCol().undoAvailable()) {
    item.setEnabled(true);
    item.setIcon(R.drawable.ic_menu_revert);
  }
 else {
    item.setEnabled(false);
    item.setIcon(R.drawable.ic_menu_revert_disabled);
  }
  item=menu.findItem(MENU_SEARCH);
  if (item != null) {
    setTitle(clipboardHasText() ? Lookup.getSearchStringTitle() : res.getString(R.string.menu_select));
  }
  return true;
}
