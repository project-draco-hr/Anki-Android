{
  MenuItem item=menu.findItem(MENU_MARK);
  if (mCurrentCard == null) {
    return false;
  }
  if (mCurrentCard.isMarked()) {
    item.setTitle(R.string.menu_marked);
    item.setIcon(R.drawable.ic_menu_star_on);
  }
 else {
    item.setTitle(R.string.menu_mark_card);
    item.setIcon(R.drawable.ic_menu_star_off);
  }
  if (mPrefTextSelection) {
    item=menu.findItem(MENU_SEARCH);
    if (mClipboard.hasText()) {
      item.setTitle(Lookup.getSearchStringTitle());
      item.setEnabled(Lookup.isAvailable());
    }
 else {
      item.setTitle(getResources().getString(R.string.menu_select));
      item.setEnabled(true);
    }
  }
  if (mPrefFullscreenReview) {
    mTextBarRed.setVisibility(View.GONE);
    mTextBarBlack.setVisibility(View.GONE);
    mTextBarBlue.setVisibility(View.GONE);
    mChosenAnswer.setVisibility(View.GONE);
    if (mPrefTimer) {
      mCardTimer.setVisibility(View.GONE);
    }
    if (mShowProgressBars) {
      mProgressBars.setVisibility(View.GONE);
    }
    getWindow().setFlags(0,WindowManager.LayoutParams.FLAG_FULLSCREEN);
  }
  menu.findItem(MENU_UNDO).setEnabled(AnkiDroidApp.deck().undoAvailable());
  menu.findItem(MENU_REDO).setEnabled(AnkiDroidApp.deck().redoAvailable());
  return true;
}
