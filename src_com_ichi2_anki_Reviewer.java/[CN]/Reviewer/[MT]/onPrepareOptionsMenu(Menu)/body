{
  MenuItem item=menu.findItem(MENU_MARK);
  if (mCurrentCard == null) {
    return false;
  }
  if (mCurrentCard.isMarked()) {
    item.setTitle(R.string.menu_marked);
    item.setIcon(R.drawable.ic_menu_star_on);
  }
 else {
    item.setTitle(R.string.menu_mark_card);
    item.setIcon(R.drawable.ic_menu_star_off);
  }
  if (mPrefTextSelection) {
    item=menu.findItem(MENU_SEARCH);
    if (clipboardHasText()) {
      item.setTitle(Lookup.getSearchStringTitle());
      item.setEnabled(Lookup.isAvailable());
    }
 else {
      item.setTitle(getResources().getString(R.string.menu_select));
      item.setEnabled(true);
    }
  }
  menu.findItem(MENU_UNDO).setEnabled(DeckManager.getMainDeck().undoAvailable());
  menu.findItem(MENU_REDO).setEnabled(DeckManager.getMainDeck().redoAvailable());
  return true;
}
