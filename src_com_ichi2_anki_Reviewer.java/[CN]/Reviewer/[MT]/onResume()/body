{
  super.onResume();
  Deck deck=DeckManager.getMainDeck();
  if (deck == null) {
    finish();
  }
  if (DeckManager.mainIsOpenedInBigWidget()) {
    DeckTask.launchDeckTask(DeckTask.TASK_TYPE_ANSWER_CARD,mAnswerCardHandler,new DeckTask.TaskData(0,deck,null));
  }
 else {
    restartTimer();
  }
  if (mShakeEnabled) {
    mSensorManager.registerListener(mSensorListener,mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),SensorManager.SENSOR_DELAY_NORMAL);
  }
  if ((AnkiDroidApp.zeemoteController() != null) && (AnkiDroidApp.zeemoteController().isConnected())) {
    Log.d("Zeemote","Adding listener in onResume");
    AnkiDroidApp.zeemoteController().addButtonListener(this);
    adapter=new JoystickToButtonAdapter();
    AnkiDroidApp.zeemoteController().addJoystickListener(adapter);
    adapter.addButtonListener(this);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
  }
}
