{
switch (item.getItemId()) {
case MENU_WHITEBOARD:
    mShowWhiteboard=!mShowWhiteboard;
  if (mShowWhiteboard) {
    mWhiteboard.setVisibility(View.VISIBLE);
    item.setTitle(R.string.hide_whiteboard);
  }
 else {
    mWhiteboard.setVisibility(View.GONE);
    item.setTitle(R.string.show_whiteboard);
  }
return true;
case MENU_CLEAR_WHITEBOARD:
mWhiteboard.clear();
return true;
case MENU_EDIT:
if (isCramming()) {
Toast cramEditWarning=Toast.makeText(Reviewer.this,getResources().getString(R.string.cram_edit_warning),Toast.LENGTH_SHORT);
cramEditWarning.show();
return false;
}
 else {
sEditorCard=mCurrentCard;
Intent editCard=new Intent(Reviewer.this,CardEditor.class);
startActivityForResult(editCard,EDIT_CURRENT_CARD);
return true;
}
case MENU_SUSPEND:
DeckTask.launchDeckTask(DeckTask.TASK_TYPE_SUSPEND_CARD,mAnswerCardHandler,new DeckTask.TaskData(0,AnkiDroidApp.deck(),mCurrentCard));
return true;
case MENU_SEARCH:
if (mPrefTextSelection && mClipboard.hasText() && mIsDictionaryAvailable) {
switch (mDictionary) {
case DICTIONARY_AEDICT:
Intent aedictSearchIntent=new Intent(mDictionaryAction);
aedictSearchIntent.putExtra("kanjis",mClipboard.getText());
startActivity(aedictSearchIntent);
mClipboard.setText("");
return true;
case DICTIONARY_LEO:
final CharSequence[] itemValues={"en","fr","es","it","ch","ru"};
String language=getLanguage(MetaDB.LANGUAGE_UNDEFINED);
for (int i=0; i < itemValues.length; i++) {
if (language.equals(itemValues[i])) {
Intent leoSearchIntent=new Intent(mDictionaryAction,Uri.parse("http://pda.leo.org/?lp=" + language + "de&search="+ mClipboard.getText()));
startActivity(leoSearchIntent);
mClipboard.setText("");
return true;
}
}
final CharSequence[] items={"Englisch","Franz??sisch","Spanisch","Italienisch","Chinesisch","Russisch"};
AlertDialog.Builder builder=new AlertDialog.Builder(this);
builder.setTitle("\"" + mClipboard.getText() + "\" nachschlagen");
builder.setItems(items,new DialogInterface.OnClickListener(){
public void onClick(DialogInterface dialog,int item){
String language=itemValues[item].toString();
Intent leoSearchIntent=new Intent(mDictionaryAction,Uri.parse("http://pda.leo.org/?lp=" + language + "de&search="+ mClipboard.getText()));
startActivity(leoSearchIntent);
mClipboard.setText("");
storeLanguage(language,MetaDB.LANGUAGE_UNDEFINED);
}
}
);
AlertDialog alert=builder.create();
alert.show();
return true;
}
}
return true;
case MENU_MARK:
DeckTask.launchDeckTask(DeckTask.TASK_TYPE_MARK_CARD,mMarkCardHandler,new DeckTask.TaskData(0,AnkiDroidApp.deck(),mCurrentCard));
return true;
case MENU_UNDO:
DeckTask.launchDeckTask(DeckTask.TASK_TYPE_UNDO,mUpdateCardHandler,new DeckTask.TaskData(0,AnkiDroidApp.deck(),mCurrentCard));
return true;
case MENU_REDO:
DeckTask.launchDeckTask(DeckTask.TASK_TYPE_REDO,mUpdateCardHandler,new DeckTask.TaskData(0,AnkiDroidApp.deck(),mCurrentCard));
return true;
}
return false;
}
