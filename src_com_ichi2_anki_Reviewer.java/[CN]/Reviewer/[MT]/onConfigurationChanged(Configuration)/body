{
  super.onConfigurationChanged(newConfig);
  setLanguage(mLocale);
  Log.i(AnkiDroidApp.TAG,"onConfigurationChanged");
  mConfigurationChanged=true;
  long savedTimer=mCardTimer.getBase();
  CharSequence savedAnswerField=mAnswerField.getText();
  initLayout(R.layout.flashcard);
  if (mRelativeButtonSize != 100) {
    mFlipCard.setHeight(mButtonHeight);
    mEase1.setHeight(mButtonHeight);
    mEase2.setHeight(mButtonHeight);
    mEase3.setHeight(mButtonHeight);
    mEase4.setHeight(mButtonHeight);
  }
  mCardTemplate=mCardTemplate.replaceFirst("var availableWidth = \\d*;","var availableWidth = " + getAvailableWidthInCard() + ";");
  if (typeAnswer()) {
    mAnswerField.setText(savedAnswerField);
  }
  if (mPrefWhiteboard) {
    mWhiteboard.rotate();
  }
  if (mInvertedColors) {
    invertColors();
  }
  if (mCurrentCard != null) {
    fillFlashcard(false);
    if (sDisplayAnswer) {
      updateForNewCard();
      showEaseButtons();
    }
    if (mPrefTimer) {
      mCardTimer.setBase(savedTimer);
      mCardTimer.start();
    }
  }
  mConfigurationChanged=false;
}
