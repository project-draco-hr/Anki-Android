{
  if (mShakeEnabled) {
    mSensorManager.unregisterListener(mSensorListener);
  }
  super.onStop();
  DeckTask.waitToFinish();
  Deck deck=DeckManager.getMainDeck();
  if (!isFinishing()) {
    if (deck != null) {
      deck.commitToDB();
    }
  }
  WidgetStatus.update(this,WidgetStatus.getDeckStatus(deck));
}
