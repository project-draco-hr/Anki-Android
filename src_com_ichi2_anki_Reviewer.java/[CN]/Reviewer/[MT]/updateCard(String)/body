{
  Log.i(AnkiDroidApp.TAG,"updateCard");
  int questionStartsAt=content.indexOf("<a name=\"question\"></a><hr/>");
  if (isQuestionDisplayed()) {
    if (sDisplayAnswer && (questionStartsAt != -1)) {
      content=Sound.parseSounds(mDeckFilename,content.substring(0,questionStartsAt),mSpeakText) + Sound.parseSounds(mDeckFilename,content.substring(questionStartsAt,content.length()),mSpeakText);
    }
 else {
      content=Sound.parseSounds(mDeckFilename,content.substring(0,content.length() - 5),mSpeakText) + "<hr/>";
    }
  }
 else {
    content=Sound.parseSounds(mDeckFilename,content,mSpeakText);
  }
  content=LaTeX.parseLaTeX(AnkiDroidApp.deck(),content);
  content=content.replace("font-weight:600;","font-weight:700;");
  if (mPrefUseRubySupport) {
    content=RubyParser.ankiRubyToMarkup(content);
  }
  String baseUrl="";
  if (mCurrentCard != null) {
    Deck currentDeck=AnkiDroidApp.deck();
    Model myModel=Model.getModel(currentDeck,mCurrentCard.getCardModelId(),false);
    baseUrl=Utils.getBaseUrl(myModel,mDeckFilename);
    content=myModel.getCSSForFontColorSize(mCurrentCard.getCardModelId(),mDisplayFontSize) + content;
  }
 else {
    mCard.getSettings().setDefaultFontSize(calculateDynamicFontSize(content));
    baseUrl="file://" + mDeckFilename.replace(".anki",".media/");
  }
  if (isHebrewFixEnabled()) {
    content=applyFixForHebrew(content);
  }
  String card=mCardTemplate.replace("::content::",content);
  Log.i(AnkiDroidApp.TAG,"base url = " + baseUrl);
  mCard.loadDataWithBaseURL(baseUrl,card,"text/html","utf-8",null);
  if (!mConfigurationChanged && mPlaySoundsAtStart) {
    if (!mSpeakText) {
      Sound.playSounds(null,null);
    }
 else     if (!sDisplayAnswer) {
      Sound.playSounds(Utils.stripHTML(mCurrentCard.getQuestion()),"de");
    }
 else {
      Sound.playSounds(Utils.stripHTML(mCurrentCard.getAnswer()),"fr");
    }
  }
}
