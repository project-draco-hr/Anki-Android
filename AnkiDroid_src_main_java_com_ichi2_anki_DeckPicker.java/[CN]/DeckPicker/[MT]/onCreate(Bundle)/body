{
  Timber.d("onCreate()");
  super.onCreate(savedInstanceState);
  SharedPreferences preferences=AnkiDroidApp.getSharedPrefs(getBaseContext());
  setContentView(R.layout.homescreen);
  View mainView=findViewById(android.R.id.content);
  View studyoptionsFrame=findViewById(R.id.studyoptions_fragment);
  mFragmented=studyoptionsFrame != null && studyoptionsFrame.getVisibility() == View.VISIBLE;
  registerExternalStorageListener();
  initNavigationDrawer(mainView);
  setTitle(getResources().getString(R.string.app_name));
  mRecyclerView=(RecyclerView)findViewById(R.id.files);
  mRecyclerView.addItemDecoration(new DividerItemDecoration(this));
  mRecyclerViewLayoutManager=new LinearLayoutManager(this);
  mRecyclerView.setLayoutManager(mRecyclerViewLayoutManager);
  mDeckListAdapter=new DeckAdapter(getLayoutInflater(),this);
  mDeckListAdapter.setDeckClickListener(mDeckClickListener);
  mDeckListAdapter.setCountsClickListener(mCountsClickListener);
  mDeckListAdapter.setDeckExpanderClickListener(mDeckExpanderClickListener);
  mDeckListAdapter.setDeckLongClickListener(mDeckLongClickListener);
  mRecyclerView.setAdapter(mDeckListAdapter);
  mActionsMenu=(FloatingActionsMenu)findViewById(R.id.add_content_menu);
  if (mActionsMenu != null) {
    configureFloatingActionsMenu();
  }
 else {
    Timber.w("Falling back on design support library FloatingActionButton");
    android.support.design.widget.FloatingActionButton addButton;
    addButton=(android.support.design.widget.FloatingActionButton)findViewById(R.id.add_note_action);
    addButton.setOnClickListener(new OnClickListener(){
      @Override public void onClick(      View v){
        CompatHelper.getCompat().supportAddContentMenu(DeckPicker.this);
      }
    }
);
  }
  mTodayTextView=(TextView)findViewById(R.id.today_stats_text_view);
  mTodayTextView=(TextView)findViewById(R.id.today_stats_text_view);
  if (!CollectionHelper.hasStorageAccessPermission(this)) {
    ActivityCompat.requestPermissions(this,new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE},REQUEST_STORAGE_PERMISSION);
  }
 else {
    showStartupScreensAndDialogs(preferences,0);
  }
}
