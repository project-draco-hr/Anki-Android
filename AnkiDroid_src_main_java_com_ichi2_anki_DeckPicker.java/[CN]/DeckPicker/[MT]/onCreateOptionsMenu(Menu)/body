{
  getMenuInflater().inflate(R.menu.deck_picker,menu);
  boolean sdCardAvailable=AnkiDroidApp.isSdCardMounted();
  menu.findItem(R.id.action_sync).setEnabled(sdCardAvailable);
  menu.findItem(R.id.action_new_filtered_deck).setEnabled(sdCardAvailable);
  menu.findItem(R.id.action_check_database).setEnabled(sdCardAvailable);
  menu.findItem(R.id.action_check_media).setEnabled(sdCardAvailable);
  if (CompatHelper.isChromebook()) {
    menu.findItem(R.id.action_restore_backup).setVisible(false);
    menu.findItem(R.id.action_import).setVisible(false);
    menu.findItem(R.id.action_export).setVisible(false);
  }
  if (mCongratulationsShown && !mFragmented) {
    Resources res=getResources();
    menu.findItem(R.id.action_undo).setVisible(true);
    String undo=res.getString(R.string.studyoptions_congrats_undo,getCol().undoName(res));
    menu.findItem(R.id.action_undo).setTitle(undo);
  }
 else {
    menu.findItem(R.id.action_undo).setVisible(false);
  }
  return super.onCreateOptionsMenu(menu);
}
