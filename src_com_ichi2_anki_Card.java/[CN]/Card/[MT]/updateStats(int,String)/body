{
  char[] newState=state.toCharArray();
  mReps+=1;
  if (ease > EASE_FAILED) {
    mSuccessive+=1;
  }
 else {
    mSuccessive=0;
  }
  double delay=Math.min(totalTime(),MAX_TIMER);
  mReviewTime+=delay;
  if (mAverageTime != 0) {
    mAverageTime=(mAverageTime + delay) / 2.0;
  }
 else {
    mAverageTime=delay;
  }
  if (STATE_NEW.equalsIgnoreCase(state)) {
    newState=STATE_YOUNG.toCharArray();
  }
  newState[0]=Character.toUpperCase(newState[0]);
  String attr="m" + String.valueOf(newState) + String.format("Ease%d",ease);
  try {
    Field f=this.getClass().getDeclaredField(attr);
    f.setInt(this,f.getInt(this) + 1);
  }
 catch (  Exception e) {
    Log.e(AnkiDroidApp.TAG,"Failed to update " + attr + " : "+ e.getMessage());
  }
  if (ease < EASE_HARD) {
    mNoCount+=1;
  }
 else {
    mYesCount+=1;
  }
  if (mFirstAnswered == 0) {
    mFirstAnswered=Utils.now();
  }
  setModified();
}
