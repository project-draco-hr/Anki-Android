{
  super.onActivityResult(requestCode,resultCode,intent);
  if (requestCode == PICK_DECK_REQUEST) {
    updateCard("");
    hideSdError();
    hideDeckErrors();
    inDeckPicker=false;
    if (resultCode != RESULT_OK) {
      Log.e(TAG,"onActivityResult - Deck browser returned with error");
      deckSelected=false;
      return;
    }
    if (intent == null) {
      Log.e(TAG,"onActivityResult - Deck browser returned null intent");
      deckSelected=false;
      return;
    }
    Log.i(TAG,"onActivityResult = OK");
    deckFilename=intent.getExtras().getString(OPT_DB);
    savePreferences();
    Log.i(TAG,"onActivityResult - deckSelected = " + deckSelected);
    displayProgressDialogAndLoadDeck();
  }
 else   if (requestCode == PREFERENCES_UPDATE) {
    restorePreferences();
    if (deckLoaded && cardsToReview) {
      showOrHideControls();
      showOrHideAnswerField();
    }
  }
 else   if (requestCode == EDIT_CURRENT_CARD) {
    DeckTask.launchDeckTask(DeckTask.TASK_TYPE_UPDATE_FACT,mUpdateCardHandler,new DeckTask.TaskData(0,AnkiDroidApp.deck(),currentCard));
    mFlipCard.setChecked(true);
    displayCardQuestion();
  }
}
