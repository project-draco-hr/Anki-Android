{
  if (mDecks == null) {
    String decksString=getDecks();
    try {
      JSONObject jsonDecks=new JSONObject(decksString);
      if ("OK".equalsIgnoreCase(jsonDecks.getString("status"))) {
        mDecks=jsonDecks.getJSONObject("decks");
        Log.i(AnkiDroidApp.TAG,"Server decks = " + mDecks.toString());
        mTimestamp=jsonDecks.getDouble("timestamp");
        mTimediff=Math.abs(mTimestamp - Utils.now());
        Log.i(AnkiDroidApp.TAG,"Server timestamp = " + mTimestamp);
        if (checkClocks && (mTimediff > 300)) {
          Log.e(AnkiDroidApp.TAG,"connect - The clock of the device and that of the server are unsynchronized!");
          return LOGIN_CLOCKS_UNSYNCED;
        }
        return LOGIN_OK;
      }
 else       if ("invalidUserPass".equalsIgnoreCase(jsonDecks.getString("status"))) {
        return LOGIN_INVALID_USER_PASS;
      }
 else       if ("oldVersion".equalsIgnoreCase(jsonDecks.getString("status"))) {
        return LOGIN_OLD_VERSION;
      }
    }
 catch (    JSONException e) {
      Log.e(AnkiDroidApp.TAG,"connect - JSONException = " + e.getMessage());
    }
  }
  return LOGIN_OK;
}
